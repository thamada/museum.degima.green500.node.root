<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01
Transitional//EN""http://www.w3.org/TR/html4/loose.dtd">
<HTML>
 <HEAD>
  <TITLE>jigdo-file</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook
  HTML Stylesheet Version 1.79"></HEAD>
 <BODY CLASS="REFENTRY" BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF"
  VLINK="#840084" ALINK="#0000FF">
  <H1><A NAME="AEN1"></A>jigdo-file</H1>
  <DIV><A NAME="AEN14"></A>
   <H2>Name</H2>jigdo-file&nbsp;--&nbsp;Prepare files for Jigsaw Download
   (distribution of huge files, e.g. CD images).</DIV>
  <DIV><A NAME="AEN17"></A>
   <H2>Synopsis</H2>
   <P><B>jigdo-file</B> { <TT><I> COMMAND</I></TT> } [<CODE>--image=<TT><I
    >cdrom.iso</I></TT></CODE>] [<CODE>--jigdo=<TT><I>cdrom.jigdo</I></TT
    ></CODE>] [<CODE>--template=<TT><I>cdrom.template</I></TT></CODE>]
    [<CODE>--force</CODE>] [MORE OPTIONS] [<TT><I>FILES</I></TT> | <CODE
    >--files-from=<TT><I>f</I></TT></CODE>]<BR> Common COMMANDs:
    make-template, make-image, verify </P></DIV>
  <DIV><A NAME="DESCRIPTION"></A>
   <H2>DESCRIPTION</H2>
   <P>Jigsaw Download, or short jigdo, is a scheme developed primarily to
    make it easy to distribute huge filesystem images (e.g. CD (ISO9660) or
    DVD (UDF) images) over the internet, but it could also be used for
    other data which is awkward to handle due to its size, like audio/video
    files or large software packages.</P>
   <P>jigdo tries to ensure that the large file (always called <I>image</I
    > from now on) is downloaded in small parts which can be stored on
    different servers. People who want to download the image do so by
    telling the <SPAN><SPAN>jigdo</SPAN>(1)</SPAN> <SPAN><I>(NOT
    IMPLEMENTED YET)</I></SPAN> download tool to process one `<TT
    >.jigdo</TT>' file; using it, <B>jigdo</B> downloads the parts and
    reassembles the image. <B>jigdo-file</B> is used to prepare the files
    for download.</P>
   <P>What makes jigdo special is that the parts that are used to
    reconstruct the image can have any size and content - they only need to
    be contained in a contiguous region anywhere in the image.</P>
   <P>For example, if you wish to distribute an ISO9660 image which
    contains a snapshot of an FTP server, you can instruct <B
    >jigdo-file</B> to prepare the download data in such a way that when
    people use <B>jigdo</B> to download the image, <B>jigdo</B> actually
    fetches the individual files from the FTP server and assembles them
    into an exact copy of your image - during the download! (If the image
    is not a filesystem dump, you can use <SPAN><SPAN>split</SPAN
    >(1)</SPAN> to create the small parts that the image will be
    reassembled from.)</P>
   <P>You are completely free to choose where the individual parts of the
    image are stored: They may be in entirely different directories on
    different servers (e.g. because of storage/bandwidth constraints), but
    this is invisible to the people downloading your image. The information
    about available servers only needs to be added to the `<TT>.jigdo</TT
    >' file by you before distributing it.</P>
   <P>The `DETAILS' section below contains technical details on how jigdo
    works. The `EXAMPLES' section lists a number of common scenarios and
    may help you to get an idea of what jigdo is useful for.</P></DIV>
  <DIV><A NAME="OPTIONS"></A>
   <H2>OPTIONS</H2>
   <P>Many options are specific to a particular <TT><I>COMMAND</I></TT>;
    the ones below are general or used by several commands. Further options
    are listed below with the individual commands. All options are silently
    ignored if they are not applicable to the current command. For any <TT
    ><I>BYTES</I></TT> parameters to options, you can append one of the
    letters `k', `M' or `G' to the amount you specify, to indicate
    kilobytes, megabytes or gigabytes.</P>
   <P></P>
   <DIV>
    <DL>
     <DT><CODE>-h</CODE> <CODE>--help</CODE></DT>
     <DD>
      <P>Output short summary of commands and options.</P></DD>
     <DT><CODE>-H</CODE> <CODE>--help-all</CODE></DT>
     <DD>
      <P>Output complete summary of commands and options.</P></DD>
     <DT><CODE>-v</CODE> <CODE>--version</CODE></DT>
     <DD>
      <P>Output program version.</P></DD>
     <DT><CODE>-i</CODE> <CODE>--image=<TT><I>cdrom.iso</I></TT></CODE
      ></DT>
     <DD>
      <P>Specify location of the file containing the image. The image is
       the large file that you want to distribute.</P></DD>
     <DT><CODE>-j</CODE> <CODE>--jigdo=<TT><I>cdrom.jigdo</I></TT></CODE
      ></DT>
     <DD>
      <P>Specify location of the Jigsaw Download description file. The
       jigdo file is a human-readable file generated by <B>jigdo-file</B>,
       to which you add information about all the servers you are going to
       upload the files to. <B>jigdo</B> will download this file as the
       first step of retrieving the image.</P></DD>
     <DT><CODE>-t</CODE> <CODE>--template=<TT><I>cdrom.template</I></TT
      ></CODE></DT>
     <DD>
      <P>Specify location of the image `template' file. The template file
       is a binary file generated by <B>jigdo-file</B>, it contains
       information on how to reassemble the image and also (in compressed
       form) all the data from the image which was not found in any of the
       parts.</P>
      <P>Depending on the command, each of these three files is used
       sometimes for input, sometimes for output. If the file is to be used
       for output for a particular command and the output file already
       exists, <B>jigdo-file</B> exits with an error, unless <CODE
       >--force</CODE> is present.</P>
      <P>In most cases, you will only need to specify one out of <CODE
       >-i</CODE> <CODE>-j</CODE> <CODE>-t</CODE>, because any missing
       filenames will be deduced from the one you specify. This is done by
       first stripping any extension from the supplied name and then
       appending nothing (if deducing <CODE>--image</CODE>), `<TT
       >.jigdo</TT>' or `<TT>.template</TT>'.</P></DD>
     <DT><CODE>-r</CODE> <CODE
      >--report=default|noprogress|quiet|grep</CODE></DT>
     <DD>
      <P>Control how verbose the program is, and what format the output
       has: <CODE>noprogress</CODE> is the same as <CODE>default</CODE>
       except that no `<SAMP>x% done</SAMP>' progress messages are printed.
       <CODE>quiet</CODE> restricts the output to what is absolutely
       necessary, mostly error messages. <CODE>grep</CODE> is only
       different from <CODE>default</CODE> for the <B>make-template</B>
       command: It enables output in a simple `<TT><I>&lt;offset&gt;
       &lt;file&gt;</I></TT>' format which is useful when searching for
       binary files in other binary files.</P></DD>
     <DT><CODE>-f</CODE> <CODE>--force</CODE></DT>
     <DD>
      <P>Overwrite existent output files without complaining.</P></DD>
     <DT><CODE>--no-force</CODE></DT>
     <DD>
      <P><SPAN><I>This is the default.</I></SPAN> Refuse to overwrite
       existent output files.</P></DD>
     <DT><CODE>-c</CODE> <CODE>--cache=<TT><I>jigdo-cache.db</I></TT
      ></CODE></DT>
     <DD>
      <P><B>jigdo-file</B> usually needs to read the entire contents of all
       the <TT><I>FILES</I></TT> you specify. If you use it repeatedly
       (e.g. because you make a new CD image available daily), caching the
       file information will increase the program's speed significantly.
       The cache file is automatically created if it is not yet present.
       Data is usually both read from and written to it.</P></DD>
     <DT><CODE>--no-cache</CODE></DT>
     <DD>
      <P><SPAN><I>This is the default.</I></SPAN> Do not use a cache.</P
      ></DD>
     <DT><CODE>--cache-expiry=<TT><I>SECONDS</I></TT></CODE></DT>
     <DD>
      <P>Set maximum age of cache entries. Any entries older than this will
       be removed from the cache. The default is 30 days. You can append
       one of the letters `h', `d', `w', `m', `y' to denote hours, days,
       weeks, months or years, respectively. A value of `0' or `off'
       disables expiry, so that all entries will stay in the cache forever.
       See the section `CACHE FILES' below for more information.</P></DD>
     <DT><CODE>--readbuffer=<TT><I>BYTES</I></TT></CODE></DT>
     <DD>
      <P>Set size of internal buffers. The default is 128k - if you have a
       fast disc, increasing this value may make <B>jigdo-file</B> faster,
       but in general, changing it is not necessary.</P></DD>
     <DT><CODE>--md5-block-size=<TT><I>BYTES</I></TT></CODE></DT>
     <DD>
      <P><SPAN><I>Uninteresting internal parameter.</I></SPAN> Set size of
       blocks into which files are subdivided. The default is 128k. If you
       change it, any cache file will have to be regenerated. Internally,
       <B>jigdo-file</B> may choose to use a slightly larger or smaller
       value.</P></DD>
     <DT><CODE>-T</CODE> <CODE>--files-from=<TT><I>file</I></TT></CODE
      ></DT>
     <DD>
      <P>Read file and directory names from the specified file. If <TT><I
       >file</I></TT> is `-', read names from standard input. Each line in
       the file is taken as a name, so the names may contain spaces, but
       not newline characters. An empty line causes <B>jigdo-file</B> to
       stop reading from the file.</P>
      <P><SPAN><SPAN>find</SPAN>(1)</SPAN> is a powerful tool for
       generating file lists, but make sure to use `<B>find -type f</B>' if
       possible - otherwise, if you instruct <B>find</B> to output both a
       filename and a symlink to that filename, <B>jigdo-file</B> will read
       the file contents twice.</P></DD>
     <DT><CODE>--hex</CODE></DT>
     <DD>
      <P>Output checksums in hexadecimal instead of Base64-like format.
       This should not be used with the <B>make-template</B> command,
       because the resulting `<TT>.jigdo</TT>' file violates the `<TT
       >.jigdo</TT>' file format. Its intended use is to make <B
       >jigdo-file</B> more interoperable with other Unix shell utilities
       like <SPAN><SPAN>md5sum</SPAN>(1)</SPAN>.</P></DD>
     <DT><CODE>--no-hex</CODE></DT>
     <DD>
      <P><SPAN><I>This is the default.</I></SPAN> Use jigdo's own
       Base64-like encoding of checksums.</P></DD>
     <DT><CODE>--debug</CODE>[<SPAN>=<TT>help</TT>|=<TT>all</TT>|=<TT><I
      >UNIT,~UNIT...</I></TT> </SPAN>]</DT>
     <DD>
      <P>Switch on or off debugging output. Just `--debug' is equivalent to
       `--debug=all'. The argument is a comma-separated list of unit names
       for which debugging output is to be enabled, or disabled if the name
       is preceded by `~'. The special name `all' means all units. By
       default, debugging output is switched off except for the units
       `assert' and `general'. The exact list of available units for which
       debugging can be switched on depends on whether jigdo was compiled
       with debugging support - the list can be printed with
       `--debug=help'.</P></DD>
     <DT><TT><I>FILES</I></TT></DT>
     <DD>
      <P>Names of files or directories to use as input. These are the parts
       that are contained in the image. In case one of the names is a
       directory, the program recursively scans the directory and adds all
       files contained in it. While doing this, it follows symbolic links,
       but avoids symlink loops.</P>
      <P>If one of the filenames starts with the character `-', you must
       precede the list of files with `--'. A value of `-' has <SPAN><I
       >no</I></SPAN> special meaning in this list, it stands for a file
       whose name is a single hyphen.</P></DD></DL></DIV></DIV>
  <DIV><A NAME="COMMANDS"></A>
   <H2>COMMANDS</H2>
   <P>The command name is the first non-option argument passed to <B
    >jigdo-file</B>. Most commands have short abbreviations as well as long
    names. <SPAN><I>The short command names should not be used in scripts -
    there may be incompatible changes to them in the future!</I></SPAN></P
   >
   <DIV><A NAME="MAKE-TEMPLATE"></A>
    <H3><B>make-template</B>, <B>mt</B></H3>
    <P>Reads <TT><I>image</I></TT> and <TT><I>FILES</I></TT>, creates `<TT
     >.jigdo</TT>' and `<TT>.template</TT>'. This is the main functionality
     of <B>jigdo-file</B>.</P>
    <P>It is possible to specify both <CODE>--image=-</CODE> and <CODE
     >--files-from=-</CODE>. In this case, first the list of files is read
     from standard input until an empty line is encountered. Everything
     following it is assumed to be the image data. This can be useful if
     you use <SPAN><SPAN>mkisofs</SPAN>(1)</SPAN> or similar programs that
     can output the complete image on their standard output, because there
     is no need to store the image on disc temporarily.</P>
    <P>If a <TT><I>FILES</I></TT> argument contains the characters `<TT
     >//</TT>' (Unix) or `<TT>\.\</TT>' (Windows), this has special
     meaning. In the final jigdo file that users will download, each of the
     parts is referenced in the `<TT>[Parts]</TT>' section with a URI of
     the form `Label:some/filename'. (See `FORMAT OF .JIGDO FILES' below
     for a detailed description.) The `<TT>[Servers]</TT>' section gives a
     mapping of labels to servers on the internet, with lines like
     `Label=http://myserver.org/jigdofiles/'. Using this information, <B
     >jigdo</B> will create the final download URI for the part,
     `http://myserver.org/jigdofiles/some/filename'. Specifying `<TT
     >//</TT>' (or `<TT>\.\</TT>') in a file or directory name serves to
     `cut off' the names at the right directory level. For example, if the
     Unix path of one of your <TT><I>FILES</I></TT> is
     `/path/some/filename', you can tell <B>jigdo-file</B> to cut off after
     the `/path' by passing it the argument `/path//some/filename', or
     `/path//' if you want the whole directory scanned. The path names need
     not be absolute; `somedirectory//' is also possible.</P>
    <P></P>
    <DIV>
     <DL>
      <DT><CODE>--label <TT><I>Label=/path</I></TT></CODE></DT>
      <DD>
       <P>Specify a name to use as the label name for a path on disc.
        (Influences the output jigdo file.) If you used `<TT>//</TT>' in
        the <TT><I>FILES</I></TT> arguments as described above, <B
        >jigdo-file</B> will by default pick label names automatically
        (`A', `B' etc.). With this option, you can give labels more
        meaningful names. Note that the label name will only be used if one
        or more <TT><I>FILES</I></TT> begin with `/path//'.</P>
       <P>Try to use label names that start with uppercase characters, to
        disambiguate them clearly from protocol names like `http',
        `ftp'.</P></DD>
      <DT><CODE>--uri <TT><I>Label=http://some.server.org/</I></TT></CODE
       ></DT>
      <DD>
       <P>By default, using <CODE>--label</CODE> as described above will
        cause lines of the form `Label=file:/path/' to be written to the
        `<TT>[Servers]</TT>' section of the output jigdo file. If you want
        to override the `file:' URI so that the line reads
        `Label=http://some.server.org/', you can do so by specifying <CODE
        >--uri</CODE> along with <CODE>--label</CODE>. Giving just <CODE
        >--uri <TT><I>Label=...</I></TT></CODE> without the corresponding
        <CODE>--label <TT><I>Label=...</I></TT></CODE> has no effect, and
        even if you specify both, an entry is only added to the `<TT
        >[Servers]</TT>' section if the label is referenced by at least one
        `<TT>[Parts]</TT>' entry.</P>
       <P>The supplied value is not quoted by the program; if it contains
        characters such as space or any of the characters <TT>#"'\</TT>
        then you must quote it. (Under Unix, you may need to quote the
        value twice to also protect it from the shell, e.g. <TT>\\\\</TT>
        or <TT>'\\'</TT> to get a single backslash in the URI.)</P>
       <P>The mapping specified with an <CODE>--uri</CODE> option is
        ignored if it is already present in the output jigdo file.</P>
       <P>Users of the Windows version may notice that the `<TT>\</TT>'
        directory separators are converted into `<TT>/</TT>' in the `file:'
        URIs that are generated by default. This is done to increase
        cross-platform compatibility of `file:' - the <B>print-missing</B>
        command of the Windows version will automatically re-convert the
        characters when it prints the URIs. In case you supply your own
        `file:' URIs under Windows using <CODE>--uri</CODE>, you must also
        exchange `<TT>/</TT>' and `<TT>\</TT>'.</P></DD>
      <DT><CODE>-0</CODE> to <CODE>-9</CODE></DT>
      <DD>
       <P>Set amount of compression in the output template file, from <CODE
        >-0</CODE> (no compression) to <CODE>-9</CODE> (maximum
        compression). The default is <CODE>-9</CODE>, which can make the
        template generation quite slow. By default, the compression
        algorithm used is the same as for <SPAN><SPAN>gzip</SPAN>(1)</SPAN
        >.</P></DD>
      <DT><CODE>--gzip</CODE> and <CODE>--bzip2</CODE></DT>
      <DD>
       <P>Choose between the gzip and bzip2 compression algorithms. The
        default is gzip. Bzip2 usually gives a better compression ratio,
        but compression is significantly slower than with gzip.</P></DD>
      <DT><CODE>--min-length=<TT><I>BYTES</I></TT></CODE></DT>
      <DD>
       <P>Set minimum length of a part for <B>jigdo-file</B> to look for it
        in the image. The default is 1k. Parts smaller than this will never
        be found in the image, so their data will be included in the
        template file. The search algorithm used requires such a minimum
        length, otherwise template generation could become extremely slow.
        If you know for sure that all your <TT><I>FILES</I></TT> are larger
        than a certain amount, you can increase <B>jigdo-file</B>'s speed
        slightly by specifying the amount with this option. There is a
        hard-wired absolute minimum of 256 bytes - anything lower will
        silently be set to 256.</P></DD>
      <DT><CODE>--merge=<TT><I>FILE</I></TT></CODE></DT>
      <DD>
       <P>Include the contents of <TT><I>FILE</I></TT> in the output `<TT
        >.jigdo</TT>' file. The file can contain data which you want added
        to the output (for example, a `<TT>[Servers]</TT>' section with a
        list of your servers as entries), or it can be the jigdo file
        output by an earlier run of <B>jigdo-file</B>.</P>
       <P>It is possible to specify the same file for input with <CODE
        >--merge</CODE> and for output with <CODE>--jigdo</CODE>. However,
        you will also need to use <CODE>--force</CODE> to make the program
        overwrite the old version of the jigdo file with the new one. <TT
        ><I>FILE</I></TT> can be `-' for standard input.</P>
       <P>When <SPAN><I>adding</I></SPAN> new information to the supplied
        file, <B>jigdo-file</B> will not insert new lines into the `<TT
        >[Parts]</TT>' section if an entry for the same MD5 checksum (but
        not necessarily with the same URI!) already exists, and it will not
        insert new lines into the `<TT>[Servers]</TT>' section if a
        completely identical entry already exists.</P>
       <P>When <SPAN><I>reading in</I></SPAN> the existing <TT><I>FILE</I
        ></TT>, the behaviour is slightly different: The program <SPAN><I
        >preserves</I></SPAN> entries in the `<TT>[Parts]</TT>' section
        with identical checksum, but different URIs. For completely
        identical entries (same checksum and URI), only one entry is
        preserved and the duplicates are removed. The `<TT>[Servers]</TT>'
        section is left untouched.</P></DD>
      <DT><CODE>--image-section</CODE></DT>
      <DD>
       <P><SPAN><I>This is the default.</I></SPAN> Causes <B>jigdo-file</B
        > to add an `<TT>[Image]</TT>' section to the `<TT>.jigdo</TT>'
        file.</P>
       <P>As an exception, a new `<TT>[Image]</TT>' section is <SPAN><I
        >not</I></SPAN> added if you use <CODE>--merge</CODE> and the file
        to merge contains an `<TT>[Image]</TT>' section with a line which
        reads `<TT>Template-MD5Sum=</TT>' (end of line after the `='). In
        this case, the generated template data's MD5 checksum value is just
        added after the `=' of the first line of this form in the file - no
        whole new `<TT>[Image]</TT>' section is appended. This behaviour is
        useful because it allows you to pass via <CODE>--merge</CODE> an
        `<TT>[Image]</TT>' section with arbitrary content and then have the
        MD5 checksum automatically added by <B>jigdo-file</B>. The section
        `FORMAT OF .JIGDO FILES' below explains the `<TT>[Image]</TT>'
        section contents in greater detail.</P></DD>
      <DT><CODE>--no-image-section</CODE></DT>
      <DD>
       <P>Do <SPAN><I>not</I></SPAN> include an `<TT>[Image]</TT>' section
        in the `<TT>.jigdo</TT>' file. You need to add one yourself if you
        use this option. However, doing that is not easy (you also need to
        add a `<TT>Template-MD5Sum</TT>' line with the correct checksum, or
        <B>jigdo</B> will complain), so use of this option is
        discouraged.</P></DD>
      <DT><CODE>--servers-section</CODE></DT>
      <DD>
       <P><SPAN><I>This is the default.</I></SPAN> Causes <B>jigdo-file</B
        > to add a `<TT>[Servers]</TT>' section to the `<TT>.jigdo</TT>'
        file. This default section uses `file:' URIs, which allows for
        immediate reassembly of the image from the local filesystem, and is
        also useful if you want to edit the file manually and replace the
        `file:' URIs with other URIs.</P></DD>
      <DT><CODE>--no-servers-section</CODE></DT>
      <DD>
       <P>Do <SPAN><I>not</I></SPAN> add a `<TT>[Servers]</TT>' section at
        the end of the `<TT>.jigdo</TT>' file. Useful e.g. if you are going
        to append the section with a script.</P></DD>
      <DT><CODE>--match-exec=<TT><I>SHELLCOMMAND</I></TT></CODE></DT>
      <DD>
       <P>Whenever a file is found in the image, execute the supplied
        command string by passing it to a shell. <B>jigdo-file</B> sets up
        a number of environment variables with information about the file
        match. For example, if the file `<TT>/path//a/b/file</TT>' was
        found in the image and `Label:a/b/file' is going to be written to
        the `<TT>.jigdo</TT>' file:
        <P></P><UL><LI>
        <P><CODE>LABEL</CODE>="<TT>Label</TT>" - Name of the label for the
         file. The example assumes that `<CODE>--label</CODE> <TT
         >Label=/path</TT>' was specified by you. In the absence of such an
         option, <CODE>LABEL</CODE> will be set but empty.</P></LI><LI>
        <P><CODE>LABELPATH</CODE>="<TT>/path/</TT>" - The path
         corresponding to the label, or in other words, the prefix of the
         matched file's path that will <SPAN><I>not</I></SPAN> appear in
         the output `<TT>.jigdo</TT>' file. Is set even without any `<CODE
         >--label</CODE>' option present. Ends with a slash.</P></LI><LI>
        <P><CODE>MATCHPATH</CODE>="<TT>a/b/</TT>" - The rest of the path,
         without the leafname of the matched file. Is either empty or ends
         with a slash.</P></LI><LI>
        <P><CODE>LEAF</CODE>="<TT>file</TT>" - The leafname of the matched
         file.</P></LI><LI>
        <P><CODE>MD5SUM</CODE>="<TT>lNVdUSqbo2yqm33webrhnw</TT>" - The
         md5sum of the matched file, in Base64-like format.</P></LI><LI>
        <P><CODE>FILE</CODE>="<TT>/path//a/b/file</TT>" - For convenience,
         the complete path of the file. The variable is always set to <TT
         >$LABELPATH$MATCHPATH$LEAF</TT>.</P></LI></UL> </P>
       <P>Please be careful to correctly quote the string passed to this
        option, otherwise your supplied command will not work with
        filenames that contain spaces. As an example, to create a backup of
        hard links to the matched files, use the following option: <TT
        >--match-exec='mkdir -p "${LABEL:-.}/$MATCHPATH" &#38;&#38; ln -f
        "$FILE" "${LABEL:-.}/$MATCHPATH$LEAF"'</TT> </P>
       <P>By default, no command is executed. Use --match-exec="" to remove
        a command string which was set with an earlier use of this
        option.</P></DD>
      <DT><CODE>--greedy-matching</CODE></DT>
      <DD>
       <P><SPAN><I>This is the default.</I></SPAN> Imagine that your image
        contains a <TT>.tar</TT> file which in turn contains another file
        <TT>x</TT>, and that you provide both the <TT>.tar</TT> and the
        files inside it on the command line. When <B>jigdo-file</B> scans
        the image, it encounters the beginning of the <TT>.tar</TT> file,
        and then the file <TT>x</TT>.</P>
       <P>At this point, a decision must be made: Should the smaller file
        <TT>x</TT> be recorded as matched, or should it be ignored in
        favour of the larger (and thus better) match of the <TT>.tar</TT>
        file? Unfortunately, at this point it is not clear whether there
        will actually be a full match of the <TT>.tar</TT>, so by default,
        the program prefers the small match.</P></DD>
      <DT><CODE>--no-greedy-matching</CODE></DT>
      <DD>
       <P>In the case where a large partial match is present and a shorter
        match has been confirmed, ignore the small match. (See the option
        above.)</P></DD></DL></DIV></DIV>
   <DIV><A NAME="MAKE-IMAGE"></A>
    <H3><B>make-image</B>, <B>mi</B></H3>
    <P>Reads `<TT>.template</TT>' and <TT><I>FILES</I></TT>, creates <TT
     ><I>image</I></TT> (or `<TT>imagename.tmp</TT>'). Provides a
     rudimentary way of reassembling images - <B>jigdo</B> is usually
     better suited for this task. However, in contrast to <B>jigdo</B>, no
     `<TT>.jigdo</TT>' file is required.</P>
    <P>If the image is to be written to a file (and not to standard
     output), it is possible to create the image in several steps, with
     several invocations of `<B>jigdo-file make-image</B>', as follows: You
     first invoke <B>jigdo-file</B>, specifying as many files as are
     available at this time. The program scans the files, and those that
     are contained in the image are copied to a temporary file, whose name
     is formed by appending `<TT>.tmp</TT>' to the image filename.</P>
    <P>For all further files which could be parts of the image, you repeat
     this process. As soon as all parts are present, the temporary file
     will be truncated slightly (to delete some administrative data that <B
     >jigdo-file</B> appends at the end) and renamed to the final image
     name. The possibility of reassembling the image in several steps is
     especially useful for gathering files from removable media, e.g.
     several older CDs.</P>
    <P>Scripts using <B>make-image</B> can detect whether image creation is
     complete by checking the exit status: 0 signals successful creation,
     whereas 1 means that more files need to be supplied. Other errors
     result in an exit status of 2 (`recoverable', e.g. file not found) or
     3 (non-recoverable, e.g. write error).</P>
    <P></P>
    <DIV>
     <DL>
      <DT><CODE>--check-files</CODE></DT>
      <DD>
       <P><SPAN><I>This is the default.</I></SPAN> Whenever any part is
        copied to the image, re-check its checksum against the checksum
        stored in the template. It is recommended that you leave this
        switched on, even if it slows down image creation a bit.</P></DD>
      <DT><CODE>--no-check-files</CODE></DT>
      <DD>
       <P>Do not check files' checksums when copying them to the image.
        This can be safely used when no cache file is used (which means
        that files will be written to the image immediately after being
        scanned) or the whole image is checked later with the <B>verify</B
        > command.</P></DD></DL></DIV></DIV>
   <DIV><A NAME="PRINT-MISSING"></A>
    <H3><B>print-missing</B>, <B>pm</B></H3>
    <P>Reads `<TT>.jigdo</TT>', `<TT>.template</TT>' and (if present) `<TT
     >imagename.tmp</TT>', outputs a list of URIs still needed to
     completely reassemble the image.</P>
    <P>Together with the <B>make-image</B> command, this provides most of
     the functionality of <B>jigdo</B> on the command line.</P>
    <P>For each part that is not yet present in the temporary image file,
     the file checksum is looked up in the `<TT>[Parts]</TT>' section of
     the jigdo file. Any label in the corresponding entry is then expanded
     according to the label definitions in the `<TT>[Servers]</TT>' section
     and printed on standard output. <B>jigdo</B> allows you to specify
     several alternative locations for each label in this section, but <B
     >print-missing</B> will only output the first one for each missing
     part.</P>
    <P>If the checksum cannot be found in the `<TT>[Parts]</TT>' section
     (this Should Not Happen unless you deleted that section), a lookup is
     instead made for `MD5Sum:<TT><I>&lt;checksum&gt;</I></TT>', just like
     with <B>jigdo</B>. (Thus, if you want to get rid of the `<TT
     >[Parts]</TT>' section, you can do so if you rename each part to its
     own checksum.)</P>
    <P></P>
    <DIV>
     <DL>
      <DT><CODE>--uri <TT><I>Label=http://some.server.org/</I></TT></CODE
       ></DT>
      <DD>
       <P>Override the entries in the `<TT>.jigdo</TT>' file for any label
        with a URI of your choice. With the example above, a `<TT
        >[Parts]</TT>' entry of `Label:some/filename' will cause the line
        `http://some.server.org/some/filename' to be printed.</P>
       <P>The supplied value is not quoted by the program; if it contains
        characters such as space or any of the characters <TT>#"'\</TT>
        then you must quote it. (Under Unix, you may need to quote the
        value twice to also protect it from the shell, e.g. <TT>\\\\</TT>
        or <TT>'\\'</TT> to get a single backslash in the URI.)</P></DD
      ></DL></DIV></DIV>
   <DIV><A NAME="PRINT-MISSING-ALL"></A>
    <H3><B>print-missing-all</B>, <B>pma</B></H3>
    <P>Just like <B>print-missing</B>, this command outputs a list of URIs
     still needed to completely reassemble the image. However, <SPAN><I
     >all</I></SPAN> alternative download locations are printed instead of
     just one. In the output, the URIs for a file are separated from other
     files' URIs with blank lines. The <CODE>--uri</CODE> option has the
     same effect as for <B>print-missing</B>.</P></DIV>
   <DIV><A NAME="VERIFY"></A>
    <H3><B>verify</B>, <B>ver</B></H3>
    <P>Reads <TT><I>image</I></TT> (presumably generated with <B
     >make-image</B>) and `<TT>.template</TT>', checks for correct checksum
     of image.</P>
    <P>The template data does not only contain checksums of the individual
     parts, but also of the image as a whole. <B>make-image</B> already
     performs a number of internal checks, but if you like, you can
     additionally check the image with this command.</P></DIV>
   <DIV><A NAME="SCAN"></A>
    <H3><B>scan</B>, <B>sc</B></H3>
    <P>Reads all the <TT><I>FILES</I></TT> and enters them into the cache,
     unless they are already cached. The <CODE>--cache</CODE> option must
     be present for this command.</P>
    <P></P>
    <DIV>
     <DL>
      <DT><CODE>--no-scan-whole-file</CODE></DT>
      <DD>
       <P><SPAN><I>This is the default.</I></SPAN> This only causes the
        first <CODE>--md5-block-size</CODE> bytes of each file to be read.
        If the cache is used later by <B>jigdo-file make-image</B>, the
        rest of the file will be read once these first bytes are recognized
        in the input image.</P></DD>
      <DT><CODE>--scan-whole-file</CODE></DT>
      <DD>
       <P>Immediately read the entire file contents and store them in the
        cache.</P></DD></DL></DIV></DIV>
   <DIV><A NAME="MD5SUM"></A>
    <H3><B>md5sum</B>, <B>md5</B></H3>
    <P>Reads all the <TT><I>FILES</I></TT> and prints out MD5 checksums of
     their contents. This command is quite similar to <SPAN><SPAN
     >md5sum</SPAN>(1)</SPAN>, except that the checksum is output in the
     Base64-like encoding which is also used elsewhere by <B>jigdo-file</B
     >.</P>
    <P>The <TT><I>FILES</I></TT> arguments are processed in the same way as
     with the other commands, which means that recursion automatically
     takes place for any arguments that are directories, and that symbolic
     links are not listed except when the file(s) they point to are not
     reachable directly.</P>
    <P>In the checksum list printed on standard output, only the part of
     the filename following any `<TT>//</TT>' (or `<TT>\.\</TT>' on
     Windows) is printed. Any <CODE>--cache</CODE> will be used for
     querying files' MD5 checksums and/or writing the checksums of scanned
     files.</P></DIV>
   <DIV><A NAME="LIST-TEMPLATE"></A>
    <H3><B>list-template</B>, <B>ls</B></H3>
    <P>Reads a `<TT>.template</TT>' file and outputs low-level information
     about the image and all parts contained in it, including offset,
     length and checksum.</P>
    <P>You can also use this command with temporary image files (by
     specifying something like <CODE>--template=imagename.tmp</CODE>) - in
     that case, the output also distinguishes between parts that have been
     written to the image and parts that haven't.</P>
    <P>The exact output format may change incompatibly between different
     jigdo releases. The following different types of lines can be output.
     `have-file' only occurs for `<TT>.tmp</TT>' files, indicating a file
     that has already been successfully written to the temporary file:</P><PRE>in-template  <TT><I
>offset-in-image  length</I
></TT
>
need-file    <TT><I
>offset-in-image  length  file-md5sum  filestart-rsyncsum</I
></TT
>
have-file    <TT><I
>offset-in-image  length  file-md5sum  filestart-rsyncsum</I
></TT
>
image-info   <TT><I
>image-length  image-md5sum  rsyncsum-size</I
></TT
></PRE></DIV></DIV>
  <DIV><A NAME="DETAILS"></A>
   <H2>DETAILS</H2>
   <P>Jigsaw Download was created with the format of ISO9660 CD images in
    mind - however, the following also applies to many other filesystem
    formats, as well as to `tar' archives and uncompressed `zip' archives.
    A CD image contains both information for organizing the filesystem
    (header with disc name etc., ISO9660 directory data, data of extensions
    such as Joliet or RockRidge, zero padding) and the files contained on
    the CD. An important property that jigdo relies on is that each file is
    stored in one contiguous section of the image; it is not split into two
    or more parts.</P>
   <P>When <B>jigdo-file</B> is given a number of files that might be
    contained in an image, it detects whether any of the files are present
    using a `rolling checksum' inspired by the one used by <SPAN><SPAN
    >rsync</SPAN>(1)</SPAN>. The resulting data is written to the `<TT
    >.template</TT>' file: If a section of the image could not be matched
    (e.g. it was directory information), the data is compressed and written
    directly to the template. However, if a matching file was found, its
    data is omitted from the template. Instead, only a reference (an MD5
    checksum of the file) is inserted in the template.</P>
   <P>Note that the template data only contains binary data, it does not
    contain any filenames or URIs, since it cannot be easily edited in case
    any of these values need to be changed. All that information is stored
    in the `<TT>.jigdo</TT>' file, a text file to which you can add URLs
    for your server(s). The jigdo file provides a mapping for each MD5
    checksum to one or more alternative download locations for the
    corresponding part.</P>
   <P>Apart from the mapping of MD5 sums to URIs, the jigdo file also
    contains an URI pointing to a download location for the template file.
    This way, the <B>jigdo</B> download tool only needs to be given one URI
    (that of the `<TT>.jigdo</TT>' file) to be able to download and
    reassemble the complete image.</P></DIV>
  <DIV><A NAME="JIGDO-FORMAT"></A>
   <H2>FORMAT OF .JIGDO FILES</H2>
   <P>The overall format of `<TT>.jigdo</TT>' files follows that of `<TT
    >.ini</TT>' files, as also used by the Gnome and KDE projects for some
    data. The file is organized into sections, each of which is preceded by
    a line reading `<TT>[Sectionname]</TT>'. Within each section, lines
    have the form `Label=Value'. Such lines are also called `entries'
    below. All `<TT>.jigdo</TT>' files use UTF-8 as their character
    encoding.</P>
   <P>Comments are introduced with the `<TT>#</TT>' character and extend to
    the end of the line. Whitespace is ignored at line start and end as
    well as to the left and right of section names and the `<TT>=</TT>' in
    entries. Furthermore, the jigdo utilities split up the text of the
    entry value (i.e. the part after the `<TT>=</TT>') into
    whitespace-separated words, much like the Unix shell. Single <TT
    >''</TT> and double <TT>""</TT> quotes can be used to prevent that e.g.
    URIs containing whitespace are split apart. Similarly, characters with
    special meaning (the characters <TT>'"#\</TT> and space/tab) must be
    quoted with <TT>\</TT> to appear in the value. As with the shell, there
    is a difference between <TT>'&nbsp;'</TT> and <TT>"&nbsp;"</TT>: Within
    <TT>'&nbsp;'</TT>, the characters <TT>"#\</TT> and whitespace lose
    their special meaning and become ordinary characters, whereas within
    <TT>"&nbsp;"</TT>, only the characters <TT>'#</TT> and whitespace lose
    their special meaning - in other words, backslash escapes still work
    inside <TT>"&nbsp;"</TT>, but not <TT>'&nbsp;'</TT>.</P>
   <P>`<TT>.jigdo</TT>' files can optionally be compressed with <SPAN
    ><SPAN>gzip</SPAN>(1)</SPAN>. <B>jigdo-file</B> always outputs
    uncompressed files, which you can compress yourself. <B>jigdo-lite</B>
    supports single uncompressed and compressed files.</P>
   <P>(Behaviour which may change in the future and which should not be
    relied upon: <B>jigdo</B> additionally supports any number of
    concatenated plaintext and gzipped parts in the files - for example,
    you can compress a `<TT>.jigdo</TT>' file and then add a couple of
    lines of uncompressed data to the end.)</P>
   <P>In all cases, the `<TT>.gz</TT>' extension should be removed from the
    filename - the tools will determine automatically from the file
    contents whether a file is compressed or not.</P>
   <P>Below is a description of the individual section names used by
    jigdo.</P>
   <DIV><A NAME="JIGDO-SECTION"></A>
    <H3>Jigdo section</H3><PRE>[Jigdo]
Version=1.1
Generator=jigdo-file/1.0.0</PRE>
    <P>Information about the version of the jigdo file format used, and the
     program that generated it. There should be one such section per `<TT
     >.jigdo</TT>' file.</P></DIV>
   <DIV><A NAME="IMAGE-SECTION"></A>
    <H3>Image section</H3><PRE>[Image]
Filename=<TT><I
>"filename for saving on user's disc"</I
></TT
>
Template=<TT><I
>"URI where to fetch template file"</I
></TT
>
Template-MD5Sum=OQ8riqT1BuyzsrT9964A7g
ShortInfo=<TT><I
>single-line description of the image (200 characters max.)</I
></TT
>
Info=<TT><I
>long description (5000 characters max.)</I
></TT
></PRE>
    <P>The value for the `Template' entry can be either an URL (absolute or
     relative to the URL of the jigdo file) or a string of the form `<TT
     ><I>Label</I></TT>:<TT><I>pathname</I></TT>' (<SPAN><I
     >UNIMPLEMENTED</I></SPAN>), as described below.</P>
    <P>The `Template-MD5Sum' entry is added by <B>jigdo-file</B> and
     specifies the MD5 checksum of the generated `<TT>.template</TT>' file.
     It is used by <B>jigdo</B> to detect cases where the downloaded
     template data is corrupted or belongs to a different image.</P>
    <P>Unlike other entry values, the values of the `<TT>ShortInfo</TT>'
     and `<TT>Info</TT>' entries are <SPAN><I>not</I></SPAN> split up into
     words, instead all quoting is preserved.</P>
    <P>The value of the `<TT>Info</TT>' entry is special in that <SPAN
     ><SPAN>jigdo</SPAN>(1)</SPAN> can optionally parse XML markup it
     contains. If the markup has errors such as unbalanced/unsupported
     tags, the string is displayed literally, without XML parsing.
     Supported tags are <TT>&lt;b&gt;&lt;/b&gt;</TT> (bold), <TT
     >&lt;i&gt;&lt;/i&gt;</TT> (italic), <TT>&lt;tt&gt;&lt;/tt&gt;</TT>
     (typewriter font), <TT>&lt;u&gt;&lt;/u&gt;</TT> (underline), <TT
     >&lt;big&gt;&lt;/big&gt;</TT> (larger font), <TT
     >&lt;small&gt;&lt;/small&gt;</TT> (smaller font) and <TT
     >&lt;br/&gt;</TT> (linebreak). Supported entities include <TT
     >&amp;lt;</TT> (`&lt;'), <TT>&amp;gt;</TT> (`&gt;') and <TT
     >&amp;amp;</TT> (`&amp;'). Note that the whole `<TT>Info</TT>' entry
     must be on one line in the jigdo file.</P>
    <P>This section may occur multiple times, but all except the first one
     will be ignored. This is useful e.g. when creating a `<TT>.jigdo</TT
     >' file for a DVD image when you already have `<TT>.jigdo</TT>' files
     for CDs with the same content: You can simply `<TT>[Include]</TT>'
     (see below) the CDs' jigdo files at the end of the DVD jigdo file,
     after its `<TT>[Image]</TT>' section.</P></DIV>
   <DIV><A NAME="PARTS-SECTION"></A>
    <H3>Parts section</H3><PRE>[Parts]
xJNkjrq8NYMraeGavUpllw=LabelA:part0
GoTResP2EC6Lb_2wTsqOoQ=LabelA:part1
kyfebwu6clbYqqWUdFIyaw=LabelB:some/path/part2
-J9UAimo0Bqg9c0oOXI1mQ=http://some.where.com/part3</PRE>
    <P>All lines in the section, which provides the mapping from MD5
     checksums to URIs, have the same format: On the left side of the `<TT
     >=</TT>' the checksum (encoded with a Base64-like encoding) is given,
     and on the right a string corresponding to the part with this
     checksum; either a complete URI or a string of the form `<TT><I
     >Label</I></TT>:<TT><I>pathname</I></TT>', which is expanded into one
     or more URIs by looking up the definition(s) for the <TT><I>Label</I
     ></TT> in the `<TT>[Servers]</TT>' section.</P>
    <P>In case a particular MD5 checksum cannot be found in any `<TT
     >[Parts]</TT>' section by <B>jigdo</B>, the program will perform a
     lookup for `<TT>MD5Sum:</TT><TT><I>&lt;checksum&gt;</I></TT>', e.g.
     for `<TT>MD5Sum:xJNkjrq8NYMraeGavUpllw</TT>' if you deleted the line
     for `part0' above.</P>
    <P>A checksum appearing multiple times in this section indicates
     alternative download locations for the part.</P>
    <P>There may be any number of `<TT>[Parts]</TT>' sections in the file;
     they are all considered when looking up MD5 checksums.</P>
    <P><B>jigdo-file</B> always puts the `<TT>[Parts]</TT>' section at the
     end of the file, and it even rearranges any file specified with <CODE
     >--merge</CODE> to have only one such section at the end. This is done
     to allow <B>jigdo</B> to display the information from the `<TT
     >[Image]</TT>' section while the rest of that file is still being
     downloaded.</P></DIV>
   <DIV><A NAME="SERVERS-SECTION"></A>
    <H3>Servers section</H3><PRE>[Servers]
LabelA=http://myserver.org/
LabelA=ftp://mirror.myserver.org/
LabelB=LabelC:subdirectory/
LabelC=http://some.where.com/jigdo/</PRE>
    <P>All lines in the section, which provides the mapping from server
     labels to server locations, have the same format: On the left side of
     the `<TT>=</TT>' the label name is given, and on the right the value
     to expand the label name to.</P>
    <P>A label name appearing multiple times in this section indicates
     alternative download locations for the parts that use the label in the
     `<TT>[Parts]</TT>' section. This notation makes it very easy to add
     mirrors to the jigdo file.</P>
    <P>As shown by the example above, the label values may themselves
     reference other labels. In this case, the entry
     `LabelB:some/path/part2' in the `<TT>[Parts]</TT>' section will expand
     to `http://some.where.com/jigdo/subdirectory/some/path/part2'. Loops
     in the label definitions result in undefined behaviour and must be
     avoided.</P>
    <P>There may be any number of `<TT>[Servers]</TT>' sections in the
     file; they are all considered when looking up labels. Either of `<TT
     >[Parts]</TT>' or `<TT>[Servers]</TT>', but not both, can be omitted
     from the jigdo file.</P></DIV>
   <DIV><A NAME="COMMENT-SECTION"></A>
    <H3>Comment section</H3><PRE>[Comment]
Any text, except that lines must not begin with `['.</PRE>
    <P>All text following a `<TT>[Comment]</TT>' or `<TT>[comment]</TT>'
     line is ignored, up to the next line with a section label.</P></DIV>
   <DIV><A NAME="INCLUDE"></A>
    <H3>Include directive</H3><PRE>[Include http://some.url/file.jigdo]</PRE
    >
    <P>Lines of this form cause the content of the specified jigdo file to
     be downloaded and parsed just like the main jigdo file. The effect
     will be the same as copying the included file's contents into the file
     which contains the include directive. (Exception: Any relative URLs
     are always resolved using the URL of the `<TT>.jigdo</TT>' file that
     contains that relative URL.)</P>
    <P>The URL argument can be an absolute or relative URL. Relative URLs
     are assumed to be relative to the URL of the jigdo file which contains
     the include directive. Includes can be nested, but it is an error to
     create a loop of include directives. It is <SPAN><I>not</I></SPAN>
     possible to use URLs of the form `<TT><I>Label</I></TT>:<TT><I
     >pathname</I></TT>'.</P>
    <P>The URL cannot be quoted with "". Any `<TT>]</TT>' characters in the
     argument must be escaped as `<TT>%5D</TT>', and any spaces as `<TT
     >%20</TT>'.</P>
    <P>Include directives are only supported by <B>jigdo</B>, they are
     ignored by <B>jigdo-lite</B>.</P>
    <P>An include directive terminates any previous section, but it does
     not start a new one. In other words, a new section must always be
     started after the include line, <B>jigdo</B> does not allow normal
     entries to appear below the `<TT>[Include]</TT>'.</P></DIV></DIV>
  <DIV><A NAME="CACHE-FILES"></A>
   <H2>CACHE FILES</H2>
   <P>Any file specified with the <CODE>--cache</CODE> option is used to
    store information about the <TT><I>FILES</I></TT> presented to <B
    >jigdo-file</B>. When querying the cache, a file is considered
    unchanged (and the cached data is used) only if filename, file size and
    last modification time (mtime) match exactly. For the filename match,
    not the entire file name is used, but only the part following any `<TT
    >//</TT>', so that any changes to the part before the `<TT>//</TT>'
    will not invalidate the cache.</P>
   <P>Old cache entries are removed from the cache if they have not been
    read from or written to for the amount of time specified with <CODE
    >--cache-expiry</CODE>. Entries are <SPAN><I>not</I></SPAN> immediately
    removed from the cache if the file they refer to no longer exists -
    this makes it possible to cache information about files on removable
    media.</P>
   <P>Cache expiry only takes place <SPAN><I>after</I></SPAN> <B
    >jigdo-file</B> has done its main work - if any old entries are
    accessed before expiry takes place, they will be kept. For example, if
    the program is run using the default expiry time of 30 days, but
    accesses a cache file with entries generated 2 months ago, then entries
    in that cache <SPAN><I>will</I></SPAN> be considered, and only those
    cache entries that were not needed during the program run will be
    expired.</P>
   <P>Due to a peculiarity of the underlying database library (libdb3),
    cache files never shrink, they only grow. If a large number of entries
    was expired from your cache file and you want it to shrink, you can
    either just delete it (of course then everything will have to be
    regenerated) or use the utilities accompanying libdb3 to dump and
    restore the database, with a command like `<B>db3_dump <TT><I
    >old-cache.db</I></TT> | db3_load <TT><I>new-cache.db</I></TT></B>'.
    <SPAN><SPAN>For Debian, these programs are supplied in the package
    `libdb3-util'.</SPAN></SPAN></P>
   <P>If a different <CODE>--md5-block-size</CODE> is specified, the entire
    file needs to be re-read to update its cache entry. If a different
    <CODE>--min-length</CODE> is specified, only the first `md5-block-size'
    bytes of the file need to be re-read.</P></DIV>
  <DIV><A NAME="EXAMPLES"></A>
   <H2>EXAMPLES</H2>
   <DIV><A NAME="EX-CDIMAGE"></A>
    <H3>Preparing your CD image for distribution</H3>
    <P>You have created a CD image `<TT>image.iso</TT>' from some of the
     files stored in the directory `<TT>/home/ftp</TT>' on your harddisc,
     which is also available online as `ftp://mysite.org'. As you don't
     want to waste space by effectively hosting the same data twice (once
     as files on the FTP server, once inside the image), and you are fed up
     with users' downloads aborting after 200MB and their restarting the
     download dozens of times, you decide to use jigdo. How do you prepare
     the image for download?</P>
    <P>In fact, only one command is necessary: <A NAME="AEN799"></A
     ><BLOCKQUOTE>
     <P><B>jigdo-file make-template --image=image.iso
      --jigdo=/home/ftp/image.jigdo --template=/home/ftp/image.template
      /home/ftp// --label Mysite=/home/ftp --uri
      Mysite=ftp://mysite.org/</B></P></BLOCKQUOTE> </P>
    <P>People can now point <B>jigdo</B> at `ftp://mysite.org/image.jigdo'
     to download your image. The template file needs to be accessible as
     `ftp://mysite.org/image.template'.</P>
    <P>Note that nothing prevents you from doing the same for an FTP server
     that isn't administrated by you - in that case, you only need to host
     the `<TT>.jigdo</TT>' and `<TT>.template</TT>' files on your own
     server/homepage.</P></DIV>
   <DIV><A NAME="EX-LARGEFILE"></A>
    <H3>Preparing an arbitrary large file for distribution</H3>
    <P>We assume that you have a large file that is not a filesystem, e.g.
     `<TT>movie.mpeg</TT>'. Because of space problems, you want to
     distribute the data on two servers.</P>
    <P>In this case, the parts of the image need to be generated
     artificially with the <B>split</B> command. For example, to create
     chunks of 4MB each, use `<B>split -b 4m movie.mpeg part</B>'. Copy the
     resulting files `<TT>part<TT><I>XX</I></TT></TT>' into two directories
     `<TT>1</TT>' and `<TT>2</TT>' that you create, according to how you
     want the files distributed between the servers. Next, create the jigdo
     and template files with `<B>jigdo-file make-template
     --image=movie.mpeg 1// 2//</B>'. You will need to edit the `<TT
     >.jigdo</TT>' file and provide the right URIs for the two servers that
     you are going to upload the `<TT>part<TT><I>XX</I></TT></TT>' files
     to.</P></DIV>
   <DIV><A NAME="EX-CUSTOMIZE"></A>
    <H3>Customized versions of images</H3>
    <P>Because it is possible to assign a different URI for each part of an
     image if necessary, jigdo is very flexible. Only one example is the
     possibility of customized versions of images: Suppose that someone is
     distributing a CD image, and that you want to make a few small changes
     to it and redistribute your own version. You download the `<TT
     >official.iso</TT>' CD image with <B>jigdo</B> (passing it the URL of
     `<TT>official.jigdo</TT>'), write it to CD-R, make your changes (say,
     adding files from the `<TT>myfiles</TT>' directory on your harddisc)
     and produce your own version, `<TT>myversion.iso</TT>'. Next, you
     instruct <B>jigdo-file</B> to create the jigdo and template files for
     your modified image, using the command <A NAME="AEN831"></A
     ><BLOCKQUOTE>
     <P><B>jigdo-file make-template --image=myversion.iso /mnt/cdrom/
      myfiles// --label My=myfiles/ --uri My=http://my.homepage.net/
      --merge=official.jigdo</B></P></BLOCKQUOTE> while `<TT
     >official.iso</TT>' is mounted under `<TT>/mnt/cdrom</TT>'. By using
     <CODE>--merge</CODE>, you have told <B>jigdo-file</B> to take the
     contents of `<TT>official.jigdo</TT>', add to it a new `<TT
     >[Image]</TT>' section for `<TT>myversion.iso</TT>' and write the
     resulting jigdo file to `<TT>myversion.jigdo</TT>' - so now `<TT
     >myversion.jigdo</TT>' offers two images for download, the original
     version and your modified version. (If you do not want it to offer the
     official version, edit it and remove the `<TT>[Image]</TT>' section
     that lists `<TT>official.iso</TT>'.)</P>
    <P>Now you can upload the `<TT>.jigdo</TT>' file, the `<TT
     >.template</TT>' file and also the files in `<TT>myfiles</TT>' to
     `http://my.homepage.net/'. Thus, for people to download your modified
     image, you do <SPAN><I>not</I></SPAN> need to upload the complete
     image contents to your web space, but only the changes you made!</P>
    <P>(In case you only made very few changes, you could also omit the
     `myfiles' parameter in the command above, then all your changes end up
     in the new template file.)</P></DIV>
   <DIV><A NAME="EX-COMBINE"></A>
    <H3>Combining many jigdo-managed images into one</H3>
    <P>It is also no problem to combine data from several sources that use
     jigdo. For example, if of five different and unrelated servers each
     one distributes a different CD image via jigdo, you can create a
     customized DVD image that contains the data from all these CDs. When
     people use <B>jigdo</B> to download your image, the individual files
     on the DVD are fetched from the same sources as the original CDs.</P>
    <P>Consequently, even though you will be distributing a 3.2GB file via
     your web space, the actual amount of data that is stored on your
     server will only be in the order of several MBs.</P></DIV></DIV>
  <DIV><A NAME="BUGS"></A>
   <H2>BUGS</H2>
   <P>For certain contents of one of the input files, most notably a
    sequence of zero bytes longer than <CODE>--min-length</CODE> at the
    start of the file and an area of zeros preceding the file data in the
    image, <B>jigdo-file make-template</B> may fail to find the file in the
    image. Unfortunately, this restriction cannot be avoided because the
    program could become very slow otherwise. If you use the <CODE
    >--debug</CODE> option, all instances of <B>jigdo-file</B> discarding
    possible matches are indicated by lines containing the word `<TT
    >DROPPED</TT>'.</P>
   <P>In fact, not only all-zeroes files trigger this behaviour, but also
    files which contain at their start a long sequence of short identical
    strings. For example, both a file containing only `<TT>a</TT>'
    characters and one containing `<TT>abcabcabcabc</TT>...' are
    problematic.</P></DIV>
  <DIV><A NAME="SEEALSO"></A>
   <H2>SEE ALSO</H2>
   <P> <SPAN><SPAN>jigdo</SPAN>(1)</SPAN> (NOT YET IMPLEMENTED), <SPAN
    ><SPAN>jigdo-lite</SPAN>(1)</SPAN>, <SPAN><SPAN>jigdo-mirror</SPAN
    >(1)</SPAN>, <SPAN><SPAN>split</SPAN>(1)</SPAN> (or `<B>info split</B
    >'), <SPAN><SPAN>find</SPAN>(1)</SPAN> (or `<B>info find</B>'), <SPAN
    ><SPAN>mkisofs</SPAN>(1)</SPAN>, <SPAN><SPAN>md5sum</SPAN>(1)</SPAN>
    </P></DIV>
  <DIV><A NAME="AUTHOR"></A>
   <H2>AUTHOR</H2>
   <P><A HREF="http://atterer.net/jigdo/" TARGET="_top">Jigsaw Download</A
    > was written by Richard Atterer <CODE>&#60;<A HREF="mailto:jigdo
    atterer.net">jigdo atterer.net</A>&#62;</CODE>, to make downloading of
    CD ROM images for the Debian Linux distribution more convenient.</P
   ></DIV>
 </BODY>
</HTML>
