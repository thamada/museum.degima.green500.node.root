<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % DISTRO_SPECIFICS SYSTEM "distro-specifics.ent">
<!ENTITY DISTRO_MAINMENU '<guimenu>the main menu on the panel (the menu with the "f" icon)</guimenu>'>
<!ENTITY % SYSTEM_CONFIG_NFS_DISTRO_SPECIFICS SYSTEM "system-config-nfs-distro-specifics.ent">
<!ENTITY SYSTEM_CONFIG_NFS_TOOL "NFS Server Configuration Tool">
<!ENTITY SYSTEM_CONFIG_NFS_INVOCATION '
    <indexterm significance="normal">
        <primary><command>system-config-nfs</command>
        </primary>
        <see>&SYSTEM_CONFIG_NFS_TOOL;</see>
    </indexterm>

    <para>
        You must be running the <application>X</application> Window System and have root privileges to use the &SYSTEM_CONFIG_NFS_TOOL;. To start the application on the desktop, go to <menuchoice>&DISTRO_MAINMENU;<guisubmenu>System</guisubmenu><guisubmenu>Administration</guisubmenu><guisubmenu>Server Settings</guisubmenu><guimenuitem>NFS</guimenuitem></menuchoice>.
    </para>
'>
<!ENTITY SYSTEM_CONFIG_NFS_ABSTRACT SYSTEM "system-config-nfs-abstract.xml">
<!ENTITY SYSTEM_CONFIG_NFS_CONTENT SYSTEM "system-config-nfs-content.xml">
<!ENTITY SYSTEM_CONFIG_NFS_HOSTNAME_FORMATS SYSTEM "system-config-nfs-hostname-formats.xml">
]>
<article lang="zh_TW"><title>NFS 伺服器設定</title><articleinfo><revhistory><revision><revnumber>1.0</revnumber><date>2008-01-17</date></revision><revision><revnumber>1.0.1</revnumber><date>2008-03-12</date></revision></revhistory><abstract role="description"><para>網路檔案系統（NFS）是個用來在機器之間透過網路共享檔案（就有如檔案位於客戶端的本機硬碟上一樣）的方式。您的機器能夠同時是個 NFS 伺服器或 NFS 客戶端，這代表它能將檔案系統匯出至其它系統上並掛載自其它機器匯出的檔案系統。</para><para>NFS 伺服器上的檔案共享是在包含著這些檔案的目錄層級上進行的，這亦稱為「匯出（exporting）」目錄。<application>NFS 伺服器設定工具</application>可用來將一部系統設定來作為一部 NFS 伺服器。</para>
</abstract><authorgroup><corpauthor role="maintainer"><trademark class="registered">Red Hat</trademark>, Inc.</corpauthor></authorgroup></articleinfo>    <para>網路檔案系統（NFS）是個用來在機器之間透過網路共享檔案（就有如檔案位於客戶端的本機硬碟上一樣）的方式。您的機器能夠同時是個 NFS 伺服器或 NFS 客戶端，這代表它能將檔案系統匯出至其它系統上並掛載自其它機器匯出的檔案系統。</para><para>NFS 伺服器上的檔案共享是在包含著這些檔案的目錄層級上進行的，這亦稱為「匯出（exporting）」目錄。<application>NFS 伺服器設定工具</application>可用來將一部系統設定來作為一部 NFS 伺服器。</para>


    <indexterm significance="normal"><primary><command>system-config-nfs</command>
        </primary><see>NFS 伺服器設定工具</see></indexterm><para>您必須執行 <application>X</application> Window System 並且擁有 root 權限才可使用 NFS 伺服器設定工具。若要在桌面上啟用應用程式，請至<menuchoice><guimenu>面板上的主選單（有個「f」圖示的選單）</guimenu><guisubmenu>系統</guisubmenu><guisubmenu>管理</guisubmenu><guisubmenu>伺服器設定</guisubmenu><guimenuitem>NFS</guimenuitem></menuchoice>。</para>

	
	<figure float="0" id="fig-system-config-nfs"><title><application>NFS 伺服器設定工具</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs.png" format="PNG"/></imageobject><textobject><para>NFS 設定工具</para></textobject></mediaobject></figure>

	<para>根據特定防火牆設定，您可能需要設定 NFS daemon 程序才可使用特定的網路作業通訊埠。NFS 伺服器設定能讓您為各項程序指定通訊埠，而無須使用 portmapper 所指定的隨機通訊埠。您可藉由按下<guibutton>伺服器設定</guibutton>按鈕來設置伺服器設定。下列圖示描述了 NFS 伺服器設定視窗。</para>
	<figure float="0" id="fig-nfs-server-settings"><title><application>NFS 伺服器設定</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-server-settings.png" format="PNG"/></imageobject><textobject><para>NFS 伺服器設定</para></textobject></mediaobject></figure>
	<section id="s2-nfs-export"><title>匯出或共享 NFS 檔案系統</title><indexterm significance="normal"><primary>NFS</primary><secondary>匯出</secondary></indexterm><indexterm significance="normal"><primary>匯出 NFS 檔案系統</primary></indexterm><indexterm significance="normal"><primary>檔案系統</primary><secondary>NFS</secondary><see>NFS</see></indexterm><indexterm significance="normal"><primary><application>NFS 伺服器設定工具</application></primary></indexterm><para>透過 NFS 伺服器來共享或服務檔案也可被視為是將包含這些檔案的目錄「匯出」。<application>NFS 伺服器設定工具</application>可被使用來將一部系統設定為一部 NFS 伺服器。</para><para>若要新增一個 NFS 共享目錄，請按下<guibutton>新增</guibutton>按鈕。<xref linkend="fig-add-share"/> 中所顯示的對話窗格將會出現。</para><para><guilabel>基本</guilabel>分頁需要下列資訊：</para><itemizedlist><listitem><para><guilabel>目錄</guilabel> — 指定欲共享的目錄，例如 <filename>/tmp</filename>。</para></listitem><listitem><para><guilabel>主機</guilabel> — 指定要和哪部主機共享目錄。欲取得可用格式上的詳情，請參閱 <xref linkend="s2-nfs-hostname-formats"/>。</para></listitem><listitem><para><guilabel>基本權限</guilabel> — 指定目錄的權限是否為唯讀或是可讀寫。</para></listitem></itemizedlist><figure float="0" id="fig-add-share"><title>新增共享目錄</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-basic.png" format="PNG"/></imageobject><textobject><para>新增 NFS 共享目錄</para></textobject></mediaobject></figure><para><guilabel>一般選項</guilabel>分頁能讓您設定下列選項：</para><figure float="0" id="fig-nfs-general-options"><title>NFS 一般選項</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-general-options.png" format="PNG"/></imageobject><textobject><para>一般選項</para></textobject></mediaobject></figure><itemizedlist><listitem><para><guilabel>允許來自大於埠號 1024 的連線</guilabel> — 由小於 1024 的埠號上啟用的服務必須以 root 權限來啟用。請選擇此選項來允許非 root 的使用者也能啟用 NFS 服務。此選項相當於 <command>insecure</command>。</para></listitem><listitem><para><guilabel>允許非安全的檔案鎖定</guilabel> — 不需要鎖定請求。此選項相當於 <command>insecure_locks</command>。</para></listitem><listitem><para><guilabel>停用 subtree 的檢查</guilabel> — 若有個檔案系統的子目錄被匯出，不過整個檔案系統並未被匯出的話，伺服器便會檢查請求的檔案是否位於被匯出的子目錄中。這項檢查稱為 <firstterm>subtree 檢查</firstterm>。請選擇此選項來停用 subtree 檢查。若在整個檔案系統都被匯出的情況下選擇停用 subtree 檢查的話可增加傳輸速率。此選項相當於 <command>no_subtree_check</command>。</para></listitem><listitem><para><guilabel>依照要求同步寫入作業</guilabel> — 就預設值會被啟用，此選項不允許伺服器在透過請求所進行的變更寫入磁碟前回應請求。此選項相當於 <command>sync</command>。若此選項沒被選取的話，<command>async</command> 選項就會被使用。</para><itemizedlist><listitem><para><guilabel>強制立即同步寫入作業</guilabel> — 不延緩寫入磁碟。此選項相當於 <command>no_wdelay</command>。</para></listitem></itemizedlist></listitem><listitem><para><guilabel>隱藏以下的檔案系統</guilabel>會開啟或關閉 <command>nohide</command> 選項。當 <command>nohide</command> 選項關閉時，巢式（nested）的目錄就會出現。因此客戶端便能在不察覺有任何變更的情況下由父目錄來瀏覽檔案系統。</para></listitem><listitem><para><guilabel>只匯出已掛載的目錄</guilabel>可設定 <command>mountpoint</command> 選項並只在某個目錄已被掛載的情況下允許它被匯出。</para></listitem><listitem><para><guilabel>選用的掛載點</guilabel>可指定非必選掛載點的路徑。請按下<guibutton>瀏覽</guibutton>來瀏覽至已知的偏好掛載點或路徑類型。</para></listitem><listitem><para><guilabel>設定明確的檔案系統 ID：</guilabel>可設定 <command>fsid=X</command> 選項。這主要是用在一個叢集設定中。在所有的叢集中使用一致的檔案系統 ID 可避免 NFS 檔案控制代碼（filehandle）過時的情況發生。</para></listitem></itemizedlist><figure float="0" id="fig-nfs-user-access"><title>NFS 使用者存取</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-user-access.png" format="PNG"/></imageobject><textobject><para>使用者存取</para></textobject></mediaobject></figure><para><guilabel>使用者存取</guilabel>分頁能讓您設定下列選項：</para><itemizedlist><listitem><para><guilabel>視遠端 root 使用者為本機的 root</guilabel> — 就預設值，root 使用者的使用者與群組 ID 皆為 0。Root squashing 會將 ID 為 0 的使用者和群組映射至匿名的使用者與群組 ID，如此一來客戶端上的 root 在 NFS 伺服器上便不會擁有 root 權限。若選取了此選項，root 便不會映射至匿名的使用者與群組 ID 上，並且會使得客戶端上的 root 擁有已匯出的目錄的存取權限。選擇此選項將會大幅度地降低系統的安全性。除非真的有必要，否則請不要選擇此選項。此選項相當於 <command>no_root_squash</command>。</para></listitem><listitem><para><guilabel>視所有的用戶端使用者為匿名的使用者</guilabel> — 若選擇了此選項，所有的使用者與群組 ID 都會被映射至匿名的使用者。此選項相當於 <command>all_squash</command>。</para><itemizedlist><listitem><para><guilabel>為匿名的使用者指定本機的使用者 ID</guilabel> — 若選擇了<guilabel>視所有的用戶端使用者為匿名的使用者</guilabel>選項的話，此選項便可讓您為匿名使用者指定一組使用者 ID。此選項相當於 <command>anonuid</command>。</para></listitem><listitem><para><guilabel>為匿名的使用者指定本機的群組 ID</guilabel> — 若選擇了 <guilabel>視所有的用戶端使用者為匿名的使用者</guilabel>選項的話，此選項能讓您為匿名使用者指定一組群組 ID。此選項相當於 <command>anongid</command>。</para></listitem></itemizedlist></listitem></itemizedlist><para>若要編輯現有的 NFS 共享目錄，請由清單中選擇共享目錄並按下<guibutton>內容</guibutton>按鈕。若要刪除現有的 NFS 共享目錄，請由清單中選擇該共享目錄並按下<guibutton>刪除</guibutton>按鈕。</para><indexterm significance="normal"><primary><filename>/etc/exports</filename></primary></indexterm><indexterm significance="normal"><primary><filename>exports</filename></primary></indexterm><para>在按下了<guibutton>確定</guibutton>來新增、編輯或由清單中刪除一個 NFS 共享目錄後，變更會即刻生效 — 伺服器 daemon 將會重新啟動，並且舊的設定檔將會被儲存為 <filename>/etc/exports.bak</filename>。新的設定將會被寫至 <filename>/etc/exports</filename>。</para><para><application>NFS 伺服器設定工具</application>會讀取並直接寫入 <filename>/etc/exports</filename> 設定檔中。因此，該檔案可在使用了此工具後被手動式地修改，並且此工具亦可在手動式修改了該檔案之後使用（前提是檔案必須透過正確的語法來修改）。</para></section>
<appendix><title>附錄</title><section id="s2-nfs-hostname-formats"><title>主機名稱格式</title><indexterm significance="normal"><primary>NFS</primary><secondary>主機名稱格式</secondary></indexterm><para>主機能夠擁有以下格式：</para><itemizedlist><listitem><para>單一機器 — 一個完整的網域名稱（此名稱能被伺服器解析）、主機名稱（此主機名稱能被伺服器解析），或是一組 IP 位址。</para></listitem><listitem><para>一系列以萬用字元指定的機器 — 使用 * 或 ? 字元來指定一組字元配對。萬用字元不可與 IP 位址搭配使用；然而，若反向 DNS 查詢失敗的話，它們可能會意外地能運作。當在完整的網域名稱中指定萬用字元時，逗點（.）不包含在萬用字元中。比方說，<computeroutput>*.example.com</computeroutput> 包含了 one.example.com 不過卻不包含 one.two.example.com。</para></listitem><listitem><para>IP 網路 — 使用 <replaceable>a.b.c.d/z</replaceable>，<replaceable>a.b.c.d</replaceable> 代表網路，並且 <replaceable>z</replaceable> 代表網路遮罩中的位元數量（例如 192.168.0.0/24）。另一個被接受的格式為 <replaceable>a.b.c.d/netmask</replaceable>，<replaceable>a.b.c.d</replaceable> 代表網路，並且 <replaceable>netmask</replaceable> 代表網路遮罩（例如 192.168.100.8/255.255.255.0）。</para></listitem><listitem><para>網路群組 — 格式為 <replaceable>@group-name</replaceable>，<replaceable>group-name</replaceable> 代表 NIS 網路群組名稱。</para></listitem></itemizedlist></section>
</appendix></article>
