<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % DISTRO_SPECIFICS SYSTEM "distro-specifics.ent">
<!ENTITY DISTRO_MAINMENU '<guimenu>the main menu on the panel (the menu with the "f" icon)</guimenu>'>
<!ENTITY % SYSTEM_CONFIG_NFS_DISTRO_SPECIFICS SYSTEM "system-config-nfs-distro-specifics.ent">
<!ENTITY SYSTEM_CONFIG_NFS_TOOL "NFS Server Configuration Tool">
<!ENTITY SYSTEM_CONFIG_NFS_INVOCATION '
    <indexterm significance="normal">
        <primary><command>system-config-nfs</command>
        </primary>
        <see>&SYSTEM_CONFIG_NFS_TOOL;</see>
    </indexterm>

    <para>
        You must be running the <application>X</application> Window System and have root privileges to use the &SYSTEM_CONFIG_NFS_TOOL;. To start the application on the desktop, go to <menuchoice>&DISTRO_MAINMENU;<guisubmenu>System</guisubmenu><guisubmenu>Administration</guisubmenu><guisubmenu>Server Settings</guisubmenu><guimenuitem>NFS</guimenuitem></menuchoice>.
    </para>
'>
<!ENTITY SYSTEM_CONFIG_NFS_ABSTRACT SYSTEM "system-config-nfs-abstract.xml">
<!ENTITY SYSTEM_CONFIG_NFS_CONTENT SYSTEM "system-config-nfs-content.xml">
<!ENTITY SYSTEM_CONFIG_NFS_HOSTNAME_FORMATS SYSTEM "system-config-nfs-hostname-formats.xml">
]>
<article lang="pt_BR"><title>Configuração do Servidor NFS</title><articleinfo><revhistory><revision><revnumber>1.0</revnumber><date>2008-01-17</date></revision><revision><revnumber>1.0.1</revnumber><date>2008-03-12</date></revision></revhistory><abstract role="description"><para>O Network File System (NFS) é uma forma de compartilhar arquivos entre máquinas em uma rede de trabalho como se os arquivos fossem localizados em um hard drive local de cliente. Sua máquina pode ser um servidor NFS e um cliente NFS, ou seja, pode exportar sistemas de arquivo para outros sistemas e montar sistemas de arquivos exportados de outras máquinas. </para><para>O compartilhamento de arquivos de um servidor NFS é feito em nível de diretórios, o qual os contém, isto é conhecido como "exportação" destes diretórios. O <application>NFS Server Configuration Tool</application> pode ser usado para configurar um sistema como um servidor NFS.</para>
</abstract><authorgroup><corpauthor role="maintainer"><trademark class="registered">Red Hat</trademark>, Inc.</corpauthor></authorgroup></articleinfo>    <para>O Network File System (NFS) é uma forma de compartilhar arquivos entre máquinas em uma rede de trabalho como se os arquivos fossem localizados em um hard drive local de cliente. Sua máquina pode ser um servidor NFS e um cliente NFS, ou seja, pode exportar sistemas de arquivo para outros sistemas e montar sistemas de arquivos exportados de outras máquinas. </para><para>O compartilhamento de arquivos de um servidor NFS é feito em nível de diretórios, o qual os contém, isto é conhecido como "exportação" destes diretórios. O <application>NFS Server Configuration Tool</application> pode ser usado para configurar um sistema como um servidor NFS.</para>


    <indexterm significance="normal"><primary><command>system-config-nfs</command>
        </primary><see>Ferramenta de Configuração do Servidor NFS</see></indexterm><para>Você precisa estar executando um Sistema Window <application>X</application> e ter previlégios para usar a Ferramenta de Configuração do Servidor NFS. Para iniciar o aplicativo no desktop, vá para <menuchoice><guimenu>o menu principal no painel (o menu com o ícone "f") </guimenu><guisubmenu>Sistemas</guisubmenu><guisubmenu>Administração</guisubmenu><guisubmenu>Configurações do Servidor</guisubmenu><guimenuitem>NFS</guimenuitem></menuchoice>.</para>

	
	<figure float="0" id="fig-system-config-nfs"><title><application>Ferramenta de Configuração do Servidor NFS</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs.png" format="PNG"/></imageobject><textobject><para>Ferramenta de Configuração do NFS</para></textobject></mediaobject></figure>

	<para>Baseado em sertas configurações do firewall, você pode precisar configurar os processos do daemon do NFS para usar portas de redes específicas. As configurações do servidor do NFS permite que você especifique as portas para cada processo ao invés de usar portas aleatórias atribuídas pelo portmapper. Você pode ajustar as configurações do Servidor do NFS, clicando em <guibutton>Server Settings</guibutton>. A figura abaixo ilustra a janela de Configurações do Servidor NFS.</para>
	<figure float="0" id="fig-nfs-server-settings"><title><application>Configurações do Servidor NFS</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-server-settings.png" format="PNG"/></imageobject><textobject><para>Configurações do Servidor NFS</para></textobject></mediaobject></figure>
	<section id="s2-nfs-export"><title>Exportando ou Compartilhando os Sistemas de Arquivo do NFS</title><indexterm significance="normal"><primary>NFS</primary><secondary>exportando</secondary></indexterm><indexterm significance="normal"><primary>exportando Sistemas de Arquivo do NFS</primary></indexterm><indexterm significance="normal"><primary>sistemas de arquivo</primary><secondary>NFS</secondary><see>NFS</see></indexterm><indexterm significance="normal"><primary><application>Ferramenta de Configuração do Servidor NFS</application></primary></indexterm><para>Compartilhar ou servir arquivos a partir de um servidor NFS é mais conhecido como "exportar" os diretórios que contém os arquivos. A <application>Ferramenta de Configuração do Servidor do NFS</application> pode ser usada para configurar um sistema como um servidor do NFS.</para><para>Para adicionar um compartilhamento do NFS, clique em <guibutton>Adicionar</guibutton>. Aparecerá a caixa de diálogo exibida em <xref linkend="fig-add-share"/>.</para><para>A aba <guilabel>Basic</guilabel> requer as seguintes informações:</para><itemizedlist><listitem><para><guilabel>Diretório</guilabel> — Especifique o diretório a compartilhar, tal como o <filename>/tmp</filename>.</para></listitem><listitem><para><guilabel>Host(s)</guilabel> — Especifique o host(s) a compartilhar o diretório. Consulte o  <xref linkend="s2-nfs-hostname-formats"/> para uma explicação de formatos possíveis.</para></listitem><listitem><para><guilabel>Permissões Básicas</guilabel> — Especifique se o diretório deve ter permissões somente-leitura ou leitura/gravação.</para></listitem></itemizedlist><figure float="0" id="fig-add-share"><title>Adicionar Share</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-basic.png" format="PNG"/></imageobject><textobject><para>Adicionar NFS Share</para></textobject></mediaobject></figure><para>A aba <guilabel>Opções Gerais</guilabel> pertence às seguintes opções para serem configuradas:</para><figure float="0" id="fig-nfs-general-options"><title>Opções Gerais do NFS</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-general-options.png" format="PNG"/></imageobject><textobject><para>Opções Gerais</para></textobject></mediaobject></figure><itemizedlist><listitem><para><guilabel>Permitir conexões da porta 1024 ou maiores</guilabel> — Serviços iniciados em números de portas menores do que 1024 devem iniciar como usuário root. Selecione esta opção para permitir que o serviço NFS seja iniciado por um usuário ao invés de um usuário root. Esta opção corresponde à <command>insecure</command>.</para></listitem><listitem><para><guilabel>Permitir bloqueamento de arquivo inseguro</guilabel> — Não requer uma requisição de bloqueio. Esta opção corresponde ao <command>insecure_locks</command>.</para></listitem><listitem><para><guilabel>Desabilitar verificação de subárvore</guilabel> — Se um subdiretório de um sistema de arquivo é exportado, mas o sistema de arquivo todo não, o servidor verifica se o arquivo requisitado está no subdiretório exportado. Esta verficação é chamada de <firstterm>verificação de subárvore</firstterm>. Selecione esta opção para desabilitar a verificação de subárvore. Se o sistema de arquivo todo for exportado, selecionar a opção para desabilitar a verificação de subárvore pode aumentar a taxa de transferência. Esta opção corresponde à <command>no_subtree_check</command>.</para></listitem><listitem><para><guilabel>Sincronizar operações de gravação se solicitado</guilabel> — Ativado por padrão, esta opção não permite o servidor reponder às solicitações antes que as mudanças por solicitação sejam gravadas no disco. Esta opção corresponde ao <command>sync</command>. Caso não seja selecionado, a opção <command>async</command> é usada.</para><itemizedlist><listitem><para><guilabel>Forçar sincronização de operações de gravação imediatamente</guilabel> -  Não atrase a gravação no disco. Esta opção corresponde ao comando <command>no_wdelay</command>.</para></listitem></itemizedlist></listitem><listitem><para><guilabel>Esconder sistemas de arquivos na parte inferior</guilabel>ativa ou desativa a opção<command>nohide</command>. Quando a opção <command>nohide</command> for desativada, os diretórios protegidos são revelados. Os clientes podem então navegar através do sistema de arquivo a partir do pai sem notar nenhuma mudança. </para></listitem><listitem><para><guilabel>Exportar somente se montado</guilabel> ajusta a opção <command>mountpoint</command> que permite que um diretório seja exportado somente se ele já foi montado.</para></listitem><listitem><para><guilabel>Mount Point Opcional</guilabel> especifica o caminho para um mount point opcional. Clique em <guibutton>Browse</guibutton> para navegar para o mount point preferido ou para o tipo de caminho, caso seja conhecido.</para></listitem><listitem><para><guilabel>Ajustar ID do Sistema de Arquivo explícito:</guilabel> ajusta a opção <command>fsid=X</command>. Isto é usado principalmente em uma instalação em cluster. Usando um ID de sistema de arquivo consistente em todos os locais de cluster que possuam os manuseadores de NFS vencidos.</para></listitem></itemizedlist><figure float="0" id="fig-nfs-user-access"><title>Acesso do Usuário do NFS</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-user-access.png" format="PNG"/></imageobject><textobject><para>Acesso do Usuário</para></textobject></mediaobject></figure><para>A aba <guilabel>Acesso de Usuário</guilabel> permite que as seguintes opções sejam configuradas:</para><itemizedlist><listitem><para><guilabel>Tratar o usuário root remoto como um usuário root local</guilabel> - Por padrão, os IDs do usuário e grupo do usuário root são 0. A compressão do usuário root, mapeia o ID0 do usuário e o ID0 do grupo para IDs de usuário e grupo de anônimos, para que assim o root em clientes não tenha previlégios root no servidor NFS. Se esta opção é selecionada, o root não é mapeado para anônimo, e o root em um cliente possuirá previlègios para diretórios exportados. Selecionar esta opção pode diminuir seriamente a segurança do sistema. Não selecione-a a menos que seja absolutamente necessário. Esta opção corresponde ao comando <command>no_root_squash</command>.</para></listitem><listitem><para><guilabel>Tratar todos os usuários de cliente como usuários anônimos</guilabel> - Caso esta opção seja selecionada, todos os IDs de usuários e grupos serão mapeados para o usuário anônimo. Esta opção corresponde ao comando <command>all_squash</command>.</para><itemizedlist><listitem><para><guilabel>Especificar ID de usuário local para usuários anônimos</guilabel> - Se <guilabel>Tratar todos os usuários de cliente como usuários anônimos</guilabel> for selecionado, esta opção permitirá que você especifique um ID de usuário para o usuário anônimo. Esta opção corresponde ao comando <command>anonuid</command>.</para></listitem><listitem><para><guilabel>Especificar ID de grupo local para usuários anônimos</guilabel> - Se <guilabel>Tratar todos os usuários de cliente como usuários anônimos</guilabel> for selecionado, esta opção permitirá que você especifique um ID de grupo para o usuário anônimo. Esta opção corresponde ao comando <command>anongid</command>.</para></listitem></itemizedlist></listitem></itemizedlist><para>Para editar um compartilhamento de NFS existente, selecione um compartilhamento a partir da lista, e clique no botão <guibutton>Properties</guibutton>. Para remover um compartilhamento de NFS existente, selecione o compartilhamento a partir da lista, e clique em <guibutton>Remover</guibutton>.</para><indexterm significance="normal"><primary><filename>/etc/exports</filename></primary></indexterm><indexterm significance="normal"><primary><filename>exportações</filename></primary></indexterm><para>Depois de clicar em <guibutton>OK</guibutton> para adicionar, editar ou remover um compartilhamento de NFS da lista, as mudanças são efetivadas imediatamente - o daemon do servidor é reiniciado e o arquivo da antiga configuração é salvo como <filename>/etc/exports.bak</filename>.  A nova configuração é gravada em <filename>/etc/exports</filename>.</para><para>A <application>NFS Server Configuration Tool</application> lê e grava diretamente no arquivo de configuração <filename>/etc/exports</filename>. Assim, o arquivo pode ser modificado manualmente após utilizar uma ferramenta, e a ferramenta pode ser usada após modificar o arquivo manualmente (considerando-se que o arquivo tenha sido modificado com a sintaxe correta).</para></section>
<appendix><title>Appendix</title><section id="s2-nfs-hostname-formats"><title>Formatos de Hostnames</title><indexterm significance="normal"><primary>NFS</primary><secondary>formatos de hostnames</secondary></indexterm><para>O(s) host(s) podem ser apresentados nos seguintes formatos:</para><itemizedlist><listitem><para>Máquina única - Um nome de domínio totalmente qualificado (que possa ser resolvido por um servidor), hostname (que possa ser resolvido por um servidor), ou um endereço de IP.</para></listitem><listitem><para>Séries de máquinas especificadas com curingas - Use os caracteres * ou ? para especificar uma coincidência de faixa. Os curingas não devem ser usados com endereços IP, no entanto, estes podem funcionar acidentalmente se a busca de DNS revertida falhar. Ao especificar curingas em nomes de domínios totalmente qualificados, pontos finais (.) não são inclusos no curinga. Por exemplo <computeroutput>*.example.com</computeroutput> inclui one.example.com mas não inclui one.two.example.com.</para></listitem><listitem><para>Redes de IP — Usam <replaceable>a.b.c.d/z</replaceable>, onde <replaceable>a.b.c.d</replaceable> é a rede e <replaceable>z</replaceable> é o número de bits na netmask (por exemplo 192.168.0.0/24). Outro formato aceitável é<replaceable>a.b.c.d/netmask</replaceable>, onde <replaceable>a.b.c.d</replaceable> é a rede e <replaceable>netmask</replaceable> é a netmask (por exemplo, 192.168.100.8/255.255.255.0).</para></listitem><listitem><para>Netgroups — No formato <replaceable>@group-name</replaceable>, onde<replaceable>group-name</replaceable> é o nome do netgroup do NIS.</para></listitem></itemizedlist></section>
</appendix></article>
