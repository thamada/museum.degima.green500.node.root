<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % DISTRO_SPECIFICS SYSTEM "distro-specifics.ent">
<!ENTITY DISTRO_MAINMENU '<guimenu>the main menu on the panel (the menu with the "f" icon)</guimenu>'>
<!ENTITY % SYSTEM_CONFIG_NFS_DISTRO_SPECIFICS SYSTEM "system-config-nfs-distro-specifics.ent">
<!ENTITY SYSTEM_CONFIG_NFS_TOOL "NFS Server Configuration Tool">
<!ENTITY SYSTEM_CONFIG_NFS_INVOCATION '
    <indexterm significance="normal">
        <primary><command>system-config-nfs</command>
        </primary>
        <see>&SYSTEM_CONFIG_NFS_TOOL;</see>
    </indexterm>

    <para>
        You must be running the <application>X</application> Window System and have root privileges to use the &SYSTEM_CONFIG_NFS_TOOL;. To start the application on the desktop, go to <menuchoice>&DISTRO_MAINMENU;<guisubmenu>System</guisubmenu><guisubmenu>Administration</guisubmenu><guisubmenu>Server Settings</guisubmenu><guimenuitem>NFS</guimenuitem></menuchoice>.
    </para>
'>
<!ENTITY SYSTEM_CONFIG_NFS_ABSTRACT SYSTEM "system-config-nfs-abstract.xml">
<!ENTITY SYSTEM_CONFIG_NFS_CONTENT SYSTEM "system-config-nfs-content.xml">
<!ENTITY SYSTEM_CONFIG_NFS_HOSTNAME_FORMATS SYSTEM "system-config-nfs-hostname-formats.xml">
]>
<article lang="ca"><title>Configuració del servidor NFS</title><articleinfo><revhistory><revision><revnumber>1.0</revnumber><date>17-01-2008</date></revision><revision><revnumber>1.0.1</revnumber><date>12-03-2008</date></revision></revhistory><abstract role="description"><para>Network File System (NFS) és un sistema per compartir fitxers entre màquines en una xarxa com si els fitxers fossin en el disc dur local del client. La vostra màquina pot ser servidor i client d'NFS, això significa que pot exportar sistemes de fitxers a altres sistemes i muntar sistemes de fitxers exportats des d'altres màquines.</para><para>La compartició de fitxers des d'un servidor NFS es fa a nivell dels directoris que els contenen, això és conegut com a «exportar» aquests directoris. L'<application>eina de configuració del servidor d'NFS</application> pot ser utilitzada per configurar un sistema com a servidor NFS.</para>
</abstract><authorgroup><corpauthor role="maintainer"><trademark class="registered">Red Hat</trademark>, Inc.</corpauthor></authorgroup><copyright><year>2009</year><holder>Xavier Faus i Torà (xfaus@diei.udl.cat)</holder></copyright></articleinfo>    <para>Network File System (NFS) és un sistema per compartir fitxers entre màquines en una xarxa com si els fitxers fossin en el disc dur local del client. La vostra màquina pot ser servidor i client d'NFS, això significa que pot exportar sistemes de fitxers a altres sistemes i muntar sistemes de fitxers exportats des d'altres màquines.</para><para>La compartició de fitxers des d'un servidor NFS es fa a nivell dels directoris que els contenen, això és conegut com a «exportar» aquests directoris. L'<application>eina de configuració del servidor d'NFS</application> pot ser utilitzada per configurar un sistema com a servidor NFS.</para>


    <indexterm significance="normal"><primary><command>system-config-nfs</command>
        </primary><see>Eina de configuració del servidor NFS</see></indexterm><para>Hauríeu d'utilitzar el sistema de finestres d'<application>X</application> i tenir privilegis de root per utilitzar l'eina de configuració del servidor d'NFS. Per iniciar l'aplicació a l'escriptori, aneu al <menuchoice><guimenu>menú principal al quadre (el menú amb la icona "f")</guimenu><guisubmenu>Sistema</guisubmenu><guisubmenu>Administració</guisubmenu><guisubmenu>Configuració del servidor</guisubmenu><guimenuitem>NFS</guimenuitem></menuchoice>.</para>

	
	<figure float="0" id="fig-system-config-nfs"><title><application>Eina de configuració del servidor NFS</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs.png" format="PNG"/></imageobject><textobject><para>Eina de configuració NFS</para></textobject></mediaobject></figure>

	<para>A causa d'algunes configuracions del tallafoc, hauríeu de configurar el dimoni d'NFS per utilitzar alguns ports específics de xarxa. La configuració del servidor NFS us permet especificar els ports per a cada procés en comptes d'utilitzar ports de forma aleatòria assignats pel mapejador de ports. Podeu configurar el servidor d'NFS fent clic al botó <guibutton>Configuració del servidor</guibutton>. La següent figura mostra la finestra de configuració del servidor NFS.</para>
	<figure float="0" id="fig-nfs-server-settings"><title><application>Configuració del servidor NFS</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-server-settings.png" format="PNG"/></imageobject><textobject><para>Configuració del servidor NFS</para></textobject></mediaobject></figure>
	<section id="s2-nfs-export"><title>Exportació o compartició del sistema de fitxers NFS</title><indexterm significance="normal"><primary>NFS</primary><secondary>exportació</secondary></indexterm><indexterm significance="normal"><primary>exportació del sistema de fitxers NFS</primary></indexterm><indexterm significance="normal"><primary>sistemes de fitxers</primary><secondary>NFS</secondary><see>NFS</see></indexterm><indexterm significance="normal"><primary><application>Eina de configuració del servidor NFS</application></primary></indexterm><para>La compartició o el servei de fitxers des d'un servidor d'NFS es coneix com a «exportació» dels directoris que contenen els fitxers. L'<application>eina de configuració del servidor d'NFS</application> es pot emprar per configurar un sistema com a servidor d'NFS.</para><para>Per afegir un sistema de fitxers NFS, premeu el botó <guibutton>Afegeix</guibutton>. Es mostrarà la caixa de diàleg a <xref linkend="fig-add-share"/>.</para><para>La pestanya <guilabel>Bàsic</guilabel> necessita la següent informació:</para><itemizedlist><listitem><para><guilabel>Directori</guilabel> - Indica el directori per compartir, com ara <filename>/tmp</filename>.</para></listitem><listitem><para><guilabel>Amfitrions- Indica els amfitrions amb els quals compartir el directori. Consulteu  per a una explicaci</guilabel></para></listitem><listitem><para><guilabel>Permisos bàsics</guilabel> - Indica si el directori hauria de tenir permisos de lectura o de lectura i escriptura.</para></listitem></itemizedlist><figure float="0" id="fig-add-share"><title>Afegeix compartició</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-basic.png" format="PNG"/></imageobject><textobject><para>Afegeix compartició per NFS</para></textobject></mediaobject></figure><para>La pestanya <guilabel>Opcions generals</guilabel> permet les següents opcions de configuració:</para><figure float="0" id="fig-nfs-general-options"><title>Opcions generals d'NFS</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-general-options.png" format="PNG"/></imageobject><textobject><para>Opcions generals</para></textobject></mediaobject></figure><itemizedlist><listitem><para><guilabel>Permet connexions des del port 1024 i superiors</guilabel> - Serveis que utilitzin nombres de ports inferiors al 1024 s'han d'inicialitzar com a root.Seleccioneu aquesta opció per permetre que el servei NFS s'inicïi com a un usuari diferent de root. Aquesta opció es correspon amb <command>insecure</command>.</para></listitem><listitem><para><guilabel>Permet el bloqueig insegur de fitxers</guilabel> - No demanis una petició de bloqueig. Aquesta opció es correspon amb <command>insecure_locks</command>.</para></listitem><listitem><para><guilabel>Desactiva la comprovació dels subarbres</guilabel> - Si s'exporta un subdirectori d'un sistema de fitxers, però no s'exporta tot el sistema, el servidor comprova si el fitxer que s'ha demanat és en el subdirectori exportat. Aquesta comprovació s'anomena <firstterm>comprovació del subarbre</firstterm>. Escolliu aquesta opció per deshabilitar la comprovació del subarbre. Si s'exporta tot el sistema de fitxers, si seleccioneu deshabilitar la comprovació del subarbre es pot incrementar la velocitat de transferència. Aquesta opció es correspon amb <command>no_subtree_check</command>.</para></listitem><listitem><para><guilabel>Sincronitza les operacions d'escriptura a petició</guilabel> — Habilitada per defecte, aquesta opció no permet que el servidor respongui a peticions abans que els canvis fets per la petició s'escriguin al disc. Aquesta opció es correspon amb <command>sync</command>. Si no se selecciona, es fa servir <command>async</command>.</para><itemizedlist><listitem><para><guilabel>Força la sincronització de les operacions d'escriptura de forma immediata</guilabel> - No retardis l'escriptura al disc. Aquesta opció correspon a <command>no_wdelay</command>.</para></listitem></itemizedlist></listitem><listitem><para><guilabel>Amaga el sistema de fitxers</guilabel> activa o desactiva l'opció <command>nohide</command>. Si l'opció <command>nohide</command> està desactivada, es mostraran els directoris imbricats inclosos. Els clients poden així navegar per un sistema de fitxers des del pare sense notar cap canvi.</para></listitem><listitem><para><guilabel>Exporta només si està muntat</guilabel> activa l'opció <command>mountpoint</command> que permet que un directori sigui exportat només si ha estat muntat.</para></listitem><listitem><para><guilabel>Punt de muntatge opcional</guilabel> especifica el camí cap a un punt de muntatge opcional. Cliqueu en <guilabel>Navega</guilabel> per navegar al punt de muntatge preferit o escriviu-ne el camí si el coneixeu.</para></listitem><listitem><para><guilabel>Estableix explícitament l'identificador de sistema de fitxers:</guilabel> defineix l'opció <command>fsid=X</command>. Això s'utilitza bàsicament en una configuració de clúster. Utilitzant un identificador de sistema de fitxers consistent en tots els clústers s'evita haver de tenir identificadors de fitxers en desús.</para></listitem></itemizedlist><figure float="0" id="fig-nfs-user-access"><title>Accés d'usuaris NFS</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-user-access.png" format="PNG"/></imageobject><textobject><para>Accés d'usuaris</para></textobject></mediaobject></figure><para>La pestanya <guilabel>Accés d'usuaris</guilabel> permet configurar les següents opcions:</para><itemizedlist><listitem><para><guilabel>Tracta l'usuari root remot com a local</guilabel> - Per defecte, els identificadors d'usuari i de grup del root són 0. L'ocultació de root mapeja l'identificador d'usuari 0 i l'identificador de grup 0 en l'usuari i grup amb identificadors anònims, de tal manera que el root en el client no té privilegis de root en el servidor NFS. Si se selecciona aquesta opció, el root no es mapeja a l'usuari anònim, i el root en el client té privilegis de root per exportar directoris. Seleccionar aquesta opció pot reduir enormement la seguretat del sistema. No seleccioneu aquesta opció a menys que sigui absolutament necessari. Aquesta opció es correspon amb <command>no_root_squash</command>.</para></listitem><listitem><para><guilabel>Tracta tots els usuaris clients com a usuaris anònims</guilabel> - Si aquesta opció és seleccionada, tots els identificadors d'usuaris i de grup són mapejats a l'usuari anònim. Aquesta opció correspon a <command>all_squash</command>.</para><itemizedlist><listitem><para><guilabel>Especifica un identificador local per a usuaris anònims</guilabel> - Si s'ha seleccionat <guilabel>Tracta tots els usuaris clients com a usuaris anònims</guilabel>, aquesta opció us permet especificar un identificador per a l'usuari anònim. Aquesta opció es correspon amb <command>anouid</command>.</para></listitem><listitem><para><guilabel>Especifica l'identificador local per als usuaris anònims</guilabel> - Si s'ha seleccionat <guilabel>Tracta tots els clients com a usuaris anònims</guilabel>, aquesta opció us permet especificar un identificador de grup per a l'usuari anònim. Aquesta opció es correspon amb <command>anongid</command>.</para></listitem></itemizedlist></listitem></itemizedlist><para>Per editar una partició NFS, seleccioneu la partició de la llista, i cliqueu al botó <guibutton>Propietats</guibutton>. Per eliminar una partició NFS, seleccioneu la partició de la llista, i cliqueu el botó <guibutton>Suprimeix</guibutton>.</para><indexterm significance="normal"><primary><filename>/etc/exports</filename></primary></indexterm><indexterm significance="normal"><primary><filename>exportats</filename></primary></indexterm><para>Després de clicar <guibutton>D'acord</guibutton> per afegir, editar o suprimir una compartició NFS de la llista, els canvis seran immediats — el dimoni del servidor es reinicia i el fitxer amb l'antiga configuració es desa com a <filename>/etc/exports.bak</filename>. La nova configuració s'escriu a <filename>/etc/exports</filename>.</para><para>L'<application>Eina de configuració del servidor NFS</application> llegeix i escriu directament al fitxer de configuració <filename>/etc/exports</filename>. Així, el fitxer pot ser modificat manualment després d'utilitzar l'eina, i l'eina pot ser utilitzada després de modificar manualment el fitxer (sempre que el fitxer modificat tingui una sintaxi correcta).</para></section>
<appendix><title>Apèndix</title><section id="s2-nfs-hostname-formats"><title>Formats del nom de màquina</title><indexterm significance="normal"><primary>NFS</primary><secondary>formats del nom de màquina</secondary></indexterm><para>Les màquines poden estar en els següents formats:</para><itemizedlist><listitem><para>Màquina única - Un nom de domini qualificat (que pugui ser resolt pel servidor),nom de màquina (que pugui ser resolt pel servidor), o adreça IP.</para></listitem><listitem><para>Màquines especificades amb comodins - Utilitzeu els caràcters * o ? per especificar una concordància de cadena de caràcters. No es poden utilitzar els caràcters comodins amb adreces IP; de totes maneres, poden funcionar accidentalment si el DNS invers falla. Quan especifiqueu caràcters comodins en noms de domini qualificats, els punts (.) no són inclosos en els caràcters comodins. Per exemple, <computeroutput>*.exemple.com</computeroutput> inclou un.exemple.com però no inclou un.dos.exemple.com.</para></listitem><listitem><para>Xarxes IP - Utilitzen <replaceable>a.b.c.d/z</replaceable>, on <replaceable>a.b.c.d</replaceable> és la xarxa i <replaceable>z</replaceable> és el número de bits a la màscara (per exemple 192.168.0.0/24). Un altre format acceptable és <replaceable>a.b.c.d/màscara</replaceable>, on <replaceable>a.b.c.d</replaceable> és la xarxa i <replaceable>màscara</replaceable> és la màscara (per exemple, 192.168.100.8/255.255.255.0).</para></listitem><listitem><para>Grups de xarxa — En format <replaceable>@nom-grup</replaceable>, on <replaceable>nom-grup</replaceable> és el nom de grup de xarxa de NIS.</para></listitem></itemizedlist></section>
</appendix></article>
