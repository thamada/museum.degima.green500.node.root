<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % DISTRO_SPECIFICS SYSTEM "distro-specifics.ent">
<!ENTITY DISTRO_MAINMENU '<guimenu>the main menu on the panel (the menu with the "f" icon)</guimenu>'>
<!ENTITY % SYSTEM_CONFIG_NFS_DISTRO_SPECIFICS SYSTEM "system-config-nfs-distro-specifics.ent">
<!ENTITY SYSTEM_CONFIG_NFS_TOOL "NFS Server Configuration Tool">
<!ENTITY SYSTEM_CONFIG_NFS_INVOCATION '
    <indexterm significance="normal">
        <primary><command>system-config-nfs</command>
        </primary>
        <see>&SYSTEM_CONFIG_NFS_TOOL;</see>
    </indexterm>

    <para>
        You must be running the <application>X</application> Window System and have root privileges to use the &SYSTEM_CONFIG_NFS_TOOL;. To start the application on the desktop, go to <menuchoice>&DISTRO_MAINMENU;<guisubmenu>System</guisubmenu><guisubmenu>Administration</guisubmenu><guisubmenu>Server Settings</guisubmenu><guimenuitem>NFS</guimenuitem></menuchoice>.
    </para>
'>
<!ENTITY SYSTEM_CONFIG_NFS_ABSTRACT SYSTEM "system-config-nfs-abstract.xml">
<!ENTITY SYSTEM_CONFIG_NFS_CONTENT SYSTEM "system-config-nfs-content.xml">
<!ENTITY SYSTEM_CONFIG_NFS_HOSTNAME_FORMATS SYSTEM "system-config-nfs-hostname-formats.xml">
]>
<article lang="pt"><title>Configuração do Servidor NFS</title><articleinfo><revhistory><revision><revnumber>1.0</revnumber><date>2008-01-17</date></revision><revision><revnumber>1.0.1</revnumber><date>2008-03-12</date></revision></revhistory><abstract role="description"><para>O NFS ("Network File System") é uma forma de partilhar ficheiros entre computadores numa rede como se estes estivessem no disco duro do cliente. A sua máquina pode ser tanto um servidor NFS como um cliente NFS, o que quer dizer que pode exportar sistemas de ficheiros para outros sistemas e montar sistemas de ficheiros exportados por outros computadores.</para><para>A partilha de ficheiros a partir de um servidor NFS é feito ao nível dos directórios que os contêm. Isto é conhecido como "exportar" esses directórios. A <application>Ferramenta de Configuração do Servidor NFS</application> pode ser utilizada para configurar um sistema como um servidor NFS.</para>
</abstract><authorgroup><corpauthor role="maintainer"><trademark class="registered">Red Hat</trademark>, Inc.</corpauthor></authorgroup></articleinfo>    <para>O NFS ("Network File System") é uma forma de partilhar ficheiros entre computadores numa rede como se estes estivessem no disco duro do cliente. A sua máquina pode ser tanto um servidor NFS como um cliente NFS, o que quer dizer que pode exportar sistemas de ficheiros para outros sistemas e montar sistemas de ficheiros exportados por outros computadores.</para><para>A partilha de ficheiros a partir de um servidor NFS é feito ao nível dos directórios que os contêm. Isto é conhecido como "exportar" esses directórios. A <application>Ferramenta de Configuração do Servidor NFS</application> pode ser utilizada para configurar um sistema como um servidor NFS.</para>


    <indexterm significance="normal"><primary><command>system-config-nfs</command>
        </primary><see>Ferramenta de Configuração do Servidor NFS</see></indexterm><para>Precisa de estar a executar o sistema <application>X</application> Window e ter privilégios de root para utilizar a Ferramenta de Configuração do Servidor NFS. Para iniciar a aplicação no ambiente de trabalho, aceda ao <menuchoice><guimenu>menu principal no painel (o menu com o icon "f")</guimenu><guisubmenu>Sistema<guisubmenu><guisubmenu>Administração</guisubmenu><guimenuitem>NFS</guimenuitem>".</guisubmenu></guisubmenu></menuchoice></para>

	
	<figure float="0" id="fig-system-config-nfs"><title><application>Ferramenta de Configuração do Servidor NFS</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs.png" format="PNG"/></imageobject><textobject><para>Ferramenta de Configuração NFS</para></textobject></mediaobject></figure>

	<para>Baseado em certas configurações da Firewall, você pode ter de configurar os processos do serviço NFS para utilizar portos de rede específicos. As configurações do servidor NFS permitem especificar os portos para cada processo, em vez de utilizarem os portos aleatórios atribuídos pelo portmapper. Voçê pode definir as configurações do servidor NFS clicando no botão <guibutton>Configurações do Servidor</guibutton>. A figura a seguir ilustra a janela das Configurações do Servidor NFS.</para>
	<figure float="0" id="fig-nfs-server-settings"><title><application>Configurações do Servidor NFS</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-server-settings.png" format="PNG"/></imageobject><textobject><para>Configurações do Servidor NFS</para></textobject></mediaobject></figure>
	<section id="s2-nfs-export"><title>Exportar ou Partilhar um Sistema de Ficheiros NFS</title><indexterm significance="normal"><primary>NFS</primary><secondary>A exportar</secondary></indexterm><indexterm significance="normal"><primary>A exportar Sistemas de ficheiros NFS</primary></indexterm><indexterm significance="normal"><primary>sistema de ficheiros</primary><secondary>NFS</secondary><see>NFS</see></indexterm><indexterm significance="normal"><primary><application>Ferramenta de Configuração do Servidor NFS</application></primary></indexterm><para>Partilhar ou servir ficheiros a partir de um servidor NFS é conhecido com "exportar" os directórios que contêm esses ficheiros. A <application>Ferramenta de Configuração do Servidor NFS</application> pode ser utilizada para configurar um sistema como servidor NFS.</para><para>Para adicionar uma partilha NFS, clique no botão <guibutton>Adicionar</guibutton>. Aparece o formulário mostrado em <xref linkend="fig-add-share"/>.</para><para>O separador <guilabel>Básico</guilabel> necessita da seguinte informação:</para><itemizedlist><listitem><para><guilabel>Directório</guilabel> — Especifica o directório a partilhar, como <filename>/tmp</filename>.</para></listitem><listitem><para><guilabel>Máquina(s)</guilabel> — Especifica a(s) máquina(s) com quem partilhar o directório. Consultar <xref linkend="s2-nfs-hostname-formats"/> para uma explicação de possíveis formatos.</para></listitem><listitem><para><guilabel>Permissões Básicas</guilabel> — Especifica se o directório precisa de ter permissões apenas de leitura ou leitura/escrita.</para></listitem></itemizedlist><figure float="0" id="fig-add-share"><title>Adicionar Partilha</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-basic.png" format="PNG"/></imageobject><textobject><para>Adicionar Partilha NFS</para></textobject></mediaobject></figure><para>O separador <guilabel>Opções Gerais</guilabel> permitem configurar as seguintes opções:</para><figure float="0" id="fig-nfs-general-options"><title>Opções Gerais NFS</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-general-options.png" format="PNG"/></imageobject><textobject><para>Opções Gerais</para></textobject></mediaobject></figure><itemizedlist><listitem><para><guilabel>Permite ligações do porto 1024 e superior</guilabel> — Serviços iniciados em portos inferiores a 1024 têm de ser iniciados como root. Seleccione esta opção para permitir que o Serviço NFS possa ser iniciado por outros utilizadores. Esta opção corresponde ao comando <command>insecure</command>.</para></listitem><listitem><para><guilabel>Permite bloqueamento inseguro de ficheiros</guilabel> — Não necessita de um pedido de bloqueamento. Esta opção corresponde ao comando <command>insecure_locks</command>.</para></listitem><listitem><para><guilabel>Desactiva verificação de sub-árvores</guilabel> — Se um sub-directório de um sistema de ficheiros é exportado, mas não o sistema de ficheiros completo, o servidor verifica se o ficheiro pedido está no sub-directório exportado. Esta verificação é designada por <firstterm>subtree checking</firstterm>. Seleccione esta opção para desactivar a verificação de sub-árvores. Se o sistema de ficheiros está exportado na sua totalidade, optando por desactivar a verificação de sub-árvores pode melhorar a taxa de transferência. Esta opção corresponde ao comando <command>no_subtree_check</command>.</para></listitem><listitem><para><guilabel>Sincronizar operações de escrita a pedido</guilabel> — Activa por omissão. Esta opção não permite que o servidor responda a pedidos antes de gravar para disco as alterações efectuadas por outros pedidos. Esta opção corresponde ao comando <command>sync</command>. Se esta opção não estiver seleccionada, a opção <command>async</command> é utilizada em substituição.</para><itemizedlist><listitem><para><guilabel>Forçar imediatamente a sincronização de operações de escrita</guilabel> — Não atrasar a escrita para disco. Esta opção corresponde ao comando <command>no_wdelay</command>.</para></listitem></itemizedlist></listitem><listitem><para><guilabel>Esconder sistemas de ficheiros de níveis inferiores</guilabel> alterna o valor da opção <command>nohide</command> para ligado ("on") ou desligado ("off"). Quando a opção <command>nohide</command> é "off", os directório de níveis inferiores são revelados. Os clientes podem portanto navegar no sistema de ficheiros a partir da raiz exportada sem notar diferenças.</para></listitem><listitem><para><guilabel>Exportar apenas se montado</guilabel> define a opção <command>mountpoint</command> que permite que um directório seja exportado apenas se foi montado.</para></listitem><listitem><para><guilabel>Ponto de montagem opcional</guilabel> especifica o caminho para um ponto de montagem opcional. Clique em <guibutton>Navegar</guibutton> para navegar até ao ponto de montagem pretendido ou digite o caminho, se conhecido.</para></listitem><listitem><para><guilabel>Configura IDs explícitos no Sistema de Ficheiros:</guilabel> configura a opção <command>fsid=X</command>. Isto é principalmente utilizado em configurações de clusters. Utilizar o mesmo ID de sistema de ficheiros em todos os clusters evita ter descritores de ficheiros a bloquear.</para></listitem></itemizedlist><figure float="0" id="fig-nfs-user-access"><title>Acesso de Utilizadores NFS</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-user-access.png" format="PNG"/></imageobject><textobject><para>Acesso de Utilizadores</para></textobject></mediaobject></figure><para>O separador <guilabel>Acesso do Utilizador</guilabel> permite configurar as seguintes opções:</para><itemizedlist><listitem><para><guilabel>Tratar utilizador root remoto como utilizador root local</guilabel> — Por omissão, o ID de utilizador e grupo do utilizador root, são ambos 0. O comando <command>root_squash"</command> mapeia o ID de utilizador 0 e o ID de grupo 0 nos IDs do utilizador e grupo anónimos, para que o root dos clientes não tenha privilégios de root no servidor NFS. Se esta opção estiver seleccionada, o root não é mapeado no utilizador anónimo, e o utilizador root dos clientes tem privilégios de root nos directórios exportados. Seleccionar esta opção reduz enormemente a segurança do sistema. Não seleccione esta opção se não for estritamente necessário. Esta opção corresponde ao comando <command>no_root_squash</command>.</para></listitem><listitem><para><guilabel>Tratar todos os clientes como utilizadores anónimos</guilabel> — Se esta opção estiver seleccionada, todos os IDs de utilizadores e grupos são mapeados no utilizador anónimo. Esta opção corresponde ao comando <command>all_squash</command>.</para><itemizedlist><listitem><para><guilabel>Especificar ID de utilizador local para utilizadores anónimo</guilabel> — Se a opção <guilabel>Tratar todos os clientes como utilizadores anónimos</guilabel> estiver seleccionada, esta opção permite especificar um ID de utilizador para o utilizador anónimo. Esta opção corresponde ao comando <command>anonuid</command>.</para></listitem><listitem><para><guilabel>Especificar ID de grupo local para utilizadores anónimo</guilabel> — Se a opção <guilabel>Tratar todos os clientes como utilizadores anónimos</guilabel> estiver seleccionada, esta opção permite especificar um ID de grupo para o utilizador anónimo. Esta opção corresponde ao comando <command>anongid</command>.</para></listitem></itemizedlist></listitem></itemizedlist><para>Para editar uma partilha NFS existente, seleccione a partilha na lista e clique no botão <guibutton>Propriedades</guibutton>. Para apagar uma partilha NFS existente, seleccione a partilha na lista e clique no botão <guibutton>Apagar</guibutton>.</para><indexterm significance="normal"><primary><filename>/etc/exports</filename></primary></indexterm><indexterm significance="normal"><primary><filename>exporta</filename></primary></indexterm><para>Depois de clicar em <guibutton>OK</guibutton> para adicionar, editar ou apagar uma partilha NFS da lista, as alterações são efectuadas de imediato — o serviço é reiniciado e a configuração anterior é gravada como <filename>/etc/exports.bak</filename>. A nova configuração é escrita para <filename>/etc/exports</filename>.</para><para>A <application>Ferramenta de Configuração do Servidor NFS</application> lê e escreve directamente para o ficheiro de configuração <filename>/etc/exports</filename>. Sendo assim, o ficheiro pode ser modificado manualmente  depois de utilizada esta ferramenta, e esta pode ser utilizada depois do ficheiro alterado manualmente (desde que o ficheiro tenha sido alterado com uma sintaxe correcta).</para></section>
<appendix><title>Apêndice</title><section id="s2-nfs-hostname-formats"><title>Formatos de Máquinas Suportados</title><indexterm significance="normal"><primary>NFS</primary><secondary>formatos de máquinas suportados</secondary></indexterm><para>As máquinas podem ser nos seguintes formatos:</para><itemizedlist><listitem><para>Máquina individual — Um nome de domínio completo (que pode ser resolvido pelo servidor), nome da máquina (que pode ser resolvido pelo servidor), ou um endereço IP.</para></listitem><listitem><para>Séries de máquinas especificadas com máscaras — Utilize os caracteres * e ? para especificar uma string de correspondência. As máscaras não são para serem utilizadas com endereços IP; contudo, podem acidentalmente funcionar se as consultas ao DNS inverso falharem. Ao especificar máscaras em nomes de domínio completos, os pontos (.) não são incluídos na máscara. Por exemplo, <computeroutput>*.exemplo.com</computeroutput> inclui um.exemplo.com mas não inclui um.dois.exemplo.com.</para></listitem><listitem><para>Redes IP — Utilize <replaceable>a.b.c.d/z</replaceable>, onde <replaceable>a.b.c.d</replaceable> é a rede e <replaceable>z</replaceable> é o número de bits da máscara de rede (por exemplo 192.168.0.0/24). Outro formato aceite é <replaceable>a.b.c.d/máscara</replaceable>, onde <replaceable>a.b.c.d</replaceable> é a rede e <replaceable>máscara</replaceable> é a máscara de rede (por exemplo, 192.168.100.8/255.255.255.0).</para></listitem><listitem><para>Grupos de rede — No formato <replaceable>@nome-grupo</replaceable>, onde <replaceable>nome-grupo</replaceable> é o nome do grupo de rede NIS.</para></listitem></itemizedlist></section>
</appendix></article>
