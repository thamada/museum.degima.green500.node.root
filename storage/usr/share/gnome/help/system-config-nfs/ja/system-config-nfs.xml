<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % DISTRO_SPECIFICS SYSTEM "distro-specifics.ent">
<!ENTITY DISTRO_MAINMENU '<guimenu>the main menu on the panel (the menu with the "f" icon)</guimenu>'>
<!ENTITY % SYSTEM_CONFIG_NFS_DISTRO_SPECIFICS SYSTEM "system-config-nfs-distro-specifics.ent">
<!ENTITY SYSTEM_CONFIG_NFS_TOOL "NFS Server Configuration Tool">
<!ENTITY SYSTEM_CONFIG_NFS_INVOCATION '
    <indexterm significance="normal">
        <primary><command>system-config-nfs</command>
        </primary>
        <see>&SYSTEM_CONFIG_NFS_TOOL;</see>
    </indexterm>

    <para>
        You must be running the <application>X</application> Window System and have root privileges to use the &SYSTEM_CONFIG_NFS_TOOL;. To start the application on the desktop, go to <menuchoice>&DISTRO_MAINMENU;<guisubmenu>System</guisubmenu><guisubmenu>Administration</guisubmenu><guisubmenu>Server Settings</guisubmenu><guimenuitem>NFS</guimenuitem></menuchoice>.
    </para>
'>
<!ENTITY SYSTEM_CONFIG_NFS_ABSTRACT SYSTEM "system-config-nfs-abstract.xml">
<!ENTITY SYSTEM_CONFIG_NFS_CONTENT SYSTEM "system-config-nfs-content.xml">
<!ENTITY SYSTEM_CONFIG_NFS_HOSTNAME_FORMATS SYSTEM "system-config-nfs-hostname-formats.xml">
]>
<article lang="ja"><title>NFS サーバーの設定</title><articleinfo><revhistory><revision><revnumber>1.0</revnumber><date>2008年 1月17日</date></revision><revision><revnumber>1.0.1</revnumber><date>2008年 3月12日</date></revision></revhistory><abstract role="description"><para>ネットワークファイルシステム (NFS) は、ネットワーク上のマシン間でファイルを共用し、ファイルがクライアントのローカルハードドライブにあるようにする方法です。あなたのマシンは NFS サーバーにも NFS クライアントにもなれ、それは他のマシンにファイルシステムをエクスポートすること、他のマシンからエクスポートされたファイルシステムをマウントすることを意味します。</para><para>NFS サーバーからのファイを共用することは、ファイルを含むディレクトリーのレベルで行われ、ディレクトリーの"エクスポート"として知られています。<application>NFS サーバー設定ツール</application>はシステムを NFS サーバーとして設定するのに使うことができます。</para>
</abstract><authorgroup><corpauthor role="maintainer"><trademark class="registered">レッドハット</trademark>社</corpauthor></authorgroup><copyright><year>2009.</year><holder>日向原 龍一 (hyu_gabaru@yahoo.co.jp)</holder></copyright></articleinfo>    <para>ネットワークファイルシステム (NFS) は、ネットワーク上のマシン間でファイルを共用し、ファイルがクライアントのローカルハードドライブにあるようにする方法です。あなたのマシンは NFS サーバーにも NFS クライアントにもなれ、それは他のマシンにファイルシステムをエクスポートすること、他のマシンからエクスポートされたファイルシステムをマウントすることを意味します。</para><para>NFS サーバーからのファイを共用することは、ファイルを含むディレクトリーのレベルで行われ、ディレクトリーの"エクスポート"として知られています。<application>NFS サーバー設定ツール</application>はシステムを NFS サーバーとして設定するのに使うことができます。</para>


    <indexterm significance="normal"><primary><command>system-config-nfs</command>
        </primary><see>NFS サーバー設定ツール</see></indexterm><para>NFS サーバー設定ツールを使うには<application>X</application>ウィンドウシステム実行中で root 権限を持っていなければなりません。デスクトップでアプリケーションを起動するには <menuchoice><guimenu>パネル上の主メニュー ("f" アイコンのメニュー)</guimenu><guisubmenu>システム</guisubmenu><guisubmenu>管理</guisubmenu><guisubmenu>サーバー設定</guisubmenu><guimenuitem>NFS</guimenuitem></menuchoice>に行きます。</para>

	
	<figure float="0" id="fig-system-config-nfs"><title><application>NFS サーバー設定ツール</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs.png" format="PNG"/></imageobject><textobject><para>NFS 設定ツール</para></textobject></mediaobject></figure>

	<para>ファイアーウォールの設定に基づき、NFS デーモンのプロセスが特定のネットワークポートを使うように設定する必要があるかもしれません。NFS サーバーの設定によりポートマッパーによる無作為のポートを使用するのではなく、個々のプロセスのポートを指定することができます。NFS サーバーの設定は<guibutton>サーバー設定</guibutton>ボタンをクリックすることでできます。下の図は NFS サーバー設定ウィンドウを図解しています。</para>
	<figure float="0" id="fig-nfs-server-settings"><title><application>NFS サーバー設定</application></title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-server-settings.png" format="PNG"/></imageobject><textobject><para>NFS サーバー設定</para></textobject></mediaobject></figure>
	<section id="s2-nfs-export"><title>NFS ファイルシステムのエクスポートまたは共有</title><indexterm significance="normal"><primary>NFS</primary><secondary>エクスポート</secondary></indexterm><indexterm significance="normal"><primary>NFS ファイルシステムのエクスポート</primary></indexterm><indexterm significance="normal"><primary>ファイルシステム</primary><secondary>NFS</secondary><see>NFS</see></indexterm><indexterm significance="normal"><primary><application>NFS サーバー設定ツール</application></primary></indexterm><para>NFS サーバーからファイルを共用する、または提供することは、ファイルを含むディレクトリーを "エクスポート" することとして知られています。<application>NFS サーバー設定ツール</application>を使って NFS サーバーの設定をすることができます。</para><para>NFS 共用を追加するには<guibutton>追加</guibutton>ボタンをクリックします。<xref linkend="fig-add-share"/>の対話ボックスが表示されます。</para><para><guilabel>基本</guilabel>では以下の情報が必要です:</para><itemizedlist><listitem><para><guilabel>ディレクトリー</guilabel> — <filename>/tmp</filename>のような、共用するディレクトリーを指定します。</para></listitem><listitem><para><guilabel>ホスト</guilabel> — ディレクトリーを共用するホストを指定します 。指定可能な様式については <xref linkend="s2-nfs-hostname-formats"/> を参照してください。</para></listitem><listitem><para><guilabel>基本許可</guilabel> — ディレクトリーが読込みのみを許可するか、読み書きを 許可するかを指定します。</para></listitem></itemizedlist><figure float="0" id="fig-add-share"><title>共有の追加</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-basic.png" format="PNG"/></imageobject><textobject><para>NFS 共有の追加</para></textobject></mediaobject></figure><para><guilabel>一般オプション</guilabel> タブにより以下のオプションの設定ができます:</para><figure float="0" id="fig-nfs-general-options"><title>NFS の一般オプション</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-general-options.png" format="PNG"/></imageobject><textobject><para>一般オプション</para></textobject></mediaobject></figure><itemizedlist><listitem><para><guilabel>1024 以上のポートからの接続を許可する</guilabel> — 1024 未満のポート番号を使うサービスは root で起動しなければなりません。このオプションを選択することで root 以外の利用者が NFS サービスを起動できるようになります。このオプションは <command>insecure</command>に相当します。</para></listitem><listitem><para><guilabel>安全でないファイルロックを許可する</guilabel> — ロック要求を必要としません。このオプションは<command>insecure_locks</command>に相当します。</para></listitem><listitem><para><guilabel>サブツリーのチェックを無効にする</guilabel> — ファイルシステムの サブディレクトリーはエクスポートされたが、ファイルシステム全体はエクスポートされていない場合、サーバーは要求されたファイルがエクスポートされたサブディレクトリーにあるかチェックします。このチェックを<firstterm>サブツリーチェック</firstterm>といいます。サブツリーチェックを無効にするにはこのオプションを選択してください。ファイルシステム全体がエクスポートされている場合、サブツリーチェックを無効にするを選択すると転送速度が向上します。このオプションは<command>no_subtree_check</command>に相当します。</para></listitem><listitem><para><guilabel>要求時の同期書込み処理</guilabel> — 省略値として有効で、このオプションは要求による変更がディスクに書かれるまでサーバーが要求に応答することを認めません。このオプションは<command>sync</command>に相当します。このオプションが選択されなかったら、<command>async</command>オプションが使われます。</para><itemizedlist><listitem><para><guilabel>直ちに書込み要求時に同期を強制する</guilabel> — ディスクへの書込みを遅延させない。このオプションは <command>no_wdelay</command>に相当します。</para></listitem></itemizedlist></listitem><listitem><para><guilabel>ファイルシステムの深さを隠す</guilabel> <command>nohide</command>オプションをオン・オフします。<command>nohide</command> オプションがオフの場合は下位のディレクトリーが公開されます。クライアントは変更を通知することなく、親からファイルシステムを検索できます。</para></listitem><listitem><para><guilabel>マウントされた時のみエクスポート</guilabel> マウントされた時のみディレクトリーのエクスポートを許可する<command>mountpoint</command>オプションを設定します。</para></listitem><listitem><para><guilabel>オプションのマウントポイント</guilabel> オプションのマウントポイントへのパスを指定します。好みのマウントポイントへ進むために<guibutton>ブラウズ</guibutton> をクリックするか、知っているのならばパスをタイプします。</para></listitem><listitem><para><guilabel>ファイルシステム ID の明示指定:</guilabel> <command>fsid=X</command>オプションを設定します。これは主にクラスター設定で使います。全てのクラスターで一貫性のあるファイルシステム ID を使うことで古くなった NFS ファイルハンドルを避けることができます。</para></listitem></itemizedlist><figure float="0" id="fig-nfs-user-access"><title>NFS 利用者アクセス</title><mediaobject><imageobject><imagedata fileref="images/system-config-nfs-add-user-access.png" format="PNG"/></imageobject><textobject><para>利用者アクセス</para></textobject></mediaobject></figure><para><guilabel>ユーザーアクセス</guilabel> タブを使うことで以下のオプションの設定ができます:</para><itemizedlist><listitem><para><guilabel>リモートの root 利用者をローカルの root として扱う</guilabel> — B略値では root 利用者の利用者 ID と グループ ID はともに 0 です。ルートスカッシュ機能はクライアントの root が NFS サーバー上で root 特権を持てないよう、利用者 ID 0 とグループ ID 0 は匿名の利用者とグループの ID にします。このオプションを選択すると、root は匿名にマップされず、クライアントの root はエクスポートされたディレクトリーに対し、root 権限を持ちます。このオプションを選択するとシステムのセキュリティーを大幅に低下させます。絶対に必要な時以外は選択しないでください。このオプションは<command>no_root_squash</command>に対応します。.</para></listitem><listitem><para><guilabel>全クライアント利用者を匿名として扱う</guilabel> — このオプションを選択すると全ての利用者とグループ ID は匿名利用者にマップされます。このオプション<command>all_squash</command>に対応します。</para><itemizedlist><listitem><para><guilabel>匿名利用者に対しローカルの利用者 ID を指定する</guilabel> — <guilabel>全クライアント利用者を匿名として扱う</guilabel> を選択した場合に、このオプションで匿名利用者に対し利用者 ID を指定します。このオプションは<command>anonuid</command>に対応します。</para></listitem><listitem><para><guilabel>匿名利用者に対しローカルのグループ ID を指定する</guilabel> — <guilabel>全クライアント利用者を匿名として扱う</guilabel> を選択した場合に、このオプションで匿名利用者に対しグループ ID を指定します。このオプションは<command>anongid</command>に対応します。</para></listitem></itemizedlist></listitem></itemizedlist><para>既存の NFS 共用を編集する場合、一覧から共用を選択し、<guibutton>プロパティー</guibutton>ボタンをクリックします。既存の NFS 共用を削除するには、一覧から共用を選択し、<guibutton>削除</guibutton>ボタンをクリックします。</para><indexterm significance="normal"><primary><filename>/etc/exports</filename></primary></indexterm><indexterm significance="normal"><primary><filename>exports</filename></primary></indexterm><para>一覧から NFS 共用を追加や、編集、削除するために<guibutton>OK</guibutton>をクリックすると、変更は直ちになされます。 — サーバーデーモンが再起動され、古い設定ファイルは<filename>/etc/exports.bak</filename>として保存されます。新しい設定ファイルは<filename>/etc/exports</filename>に書かれます。</para><para><application>NFS サーバー設定ツール</application> は直接<filename>/etc/exports</filename> 設定ファイルを読み書きします。従ってツールを使った後に手操作でファイルを変更できますし、ファイルを手操作で変更した後でツールを使うことができます(提供されるファイルは正しい形式で変更されます)。</para></section>
<appendix><title>付録</title><section id="s2-nfs-hostname-formats"><title>ホスト名の書式</title><indexterm significance="normal"><primary>NFS</primary><secondary>ホスト名の書式</secondary></indexterm><para>ホストは以下の書式です:</para><itemizedlist><listitem><para>単一マシン — 完全修飾ドメイン名 (サーバーから解決できる)か、ホスト名 (サーバーから解決できる)、IP アドレス。</para></listitem><listitem><para>ワイルドカードで指定された一連のマシン —  * か ? 文字を使って文字列に一致するものを 指定します。ワイルドカードは IP アドレスには使えません; しかし DNS 逆引きに失敗した場合に、偶然動作することがあります。完全修飾ドメイン名にワイルドカードを指定する場合、ドット (.) はワイルドカードに含まれません。例えば<computeroutput>*.example.com</computeroutput> は one.example.com を含みますが、one.two.example.com は含みません。</para></listitem><listitem><para>IP ネットワーク — <replaceable>a.b.c.d/z</replaceable>を使い、<replaceable>a.b.c.d</replaceable> がネットワークで、<replaceable>z</replaceable> がネットマスクのビット数です (例えば 192.168.0.0/24)。もう一つの有効な形式は<replaceable>a.b.c.d/netmask</replaceable>で、<replaceable>a.b.c.d</replaceable> がネットワークで、<replaceable>netmask</replaceable> がネットマスクです(例えば 192.168.100.8/255.255.255.0)。</para></listitem><listitem><para>ネットグループ — <replaceable>@group-name</replaceable>形式で、<replaceable>group-name</replaceable> が NIS ネットグループ名です。</para></listitem></itemizedlist></section>
</appendix></article>
