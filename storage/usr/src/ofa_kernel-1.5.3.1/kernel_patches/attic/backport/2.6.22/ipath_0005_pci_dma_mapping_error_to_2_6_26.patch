---
 drivers/infiniband/hw/ipath/ipath_sdma.c      |    2 +-
 drivers/infiniband/hw/ipath/ipath_user_sdma.c |    6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

Index: ofa_kernel-1.4/drivers/infiniband/hw/ipath/ipath_sdma.c
===================================================================
--- ofa_kernel-1.4.orig/drivers/infiniband/hw/ipath/ipath_sdma.c	2009-01-25 21:37:35.000000000 -0800
+++ ofa_kernel-1.4/drivers/infiniband/hw/ipath/ipath_sdma.c	2009-01-25 21:41:22.000000000 -0800
@@ -698,7 +698,7 @@ retry:
 
 	addr = dma_map_single(&dd->pcidev->dev, tx->txreq.map_addr,
 			      tx->map_len, DMA_TO_DEVICE);
-	if (dma_mapping_error(&dd->pcidev->dev, addr))
+	if (dma_mapping_error(addr))
 		goto ioerr;
 
 	dwoffset = tx->map_len >> 2;
@@ -739,7 +739,7 @@ retry:
 		dw = (len + 3) >> 2;
 		addr = dma_map_single(&dd->pcidev->dev, sge->vaddr, dw << 2,
 				      DMA_TO_DEVICE);
-		if (dma_mapping_error(&dd->pcidev->dev, addr))
+		if (dma_mapping_error(addr))
 			goto unmap;
 		make_sdma_desc(dd, sdmadesc, (u64) addr, dw, dwoffset);
 		/* SDmaUseLargeBuf has to be set in every descriptor */
Index: ofa_kernel-1.4/drivers/infiniband/hw/ipath/ipath_user_sdma.c
===================================================================
--- ofa_kernel-1.4.orig/drivers/infiniband/hw/ipath/ipath_user_sdma.c	2009-01-25 21:37:18.000000000 -0800
+++ ofa_kernel-1.4/drivers/infiniband/hw/ipath/ipath_user_sdma.c	2009-01-25 21:37:54.000000000 -0800
@@ -206,7 +206,7 @@ static int ipath_user_sdma_coalesce(cons
 
 	dma_addr = dma_map_page(&dd->pcidev->dev, page, 0, len,
 				DMA_TO_DEVICE);
-	if (dma_mapping_error(&dd->pcidev->dev, dma_addr)) {
+	if (dma_mapping_error(dma_addr)) {
 		ret = -ENOMEM;
 		goto free_unmap;
 	}
@@ -301,7 +301,7 @@ static int ipath_user_sdma_pin_pages(con
 				     pages[j], 0, flen, DMA_TO_DEVICE);
 		unsigned long fofs = addr & ~PAGE_MASK;
 
-		if (dma_mapping_error(&dd->pcidev->dev, dma_addr)) {
+		if (dma_mapping_error(dma_addr)) {
 			ret = -ENOMEM;
 			goto done;
 		}
@@ -508,7 +508,7 @@ static int ipath_user_sdma_queue_pkts(co
 		if (page) {
 			dma_addr = dma_map_page(&dd->pcidev->dev,
 						page, 0, len, DMA_TO_DEVICE);
-			if (dma_mapping_error(&dd->pcidev->dev, dma_addr)) {
+			if (dma_mapping_error(dma_addr)) {
 				ret = -ENOMEM;
 				goto free_pbc;
 			}
