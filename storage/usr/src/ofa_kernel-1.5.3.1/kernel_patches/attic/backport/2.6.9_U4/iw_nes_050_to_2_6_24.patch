diff --git a/drivers/infiniband/hw/nes/nes.c b/drivers/infiniband/hw/nes/nes.c
index 0696b4c..f81379d 100644
--- a/drivers/infiniband/hw/nes/nes.c
+++ b/drivers/infiniband/hw/nes/nes.c
@@ -1118,19 +1118,19 @@ static ssize_t nes_show_wqm_quanta(struct device_driver *ddp, char *buf)
 static ssize_t nes_store_wqm_quanta(struct device_driver *ddp,
 					const char *buf, size_t count)
 {
-	unsigned long wqm_quanta_value;
+	u32 wqm_quanta;
 	u32 wqm_config1;
 	u32 i = 0;
 	struct nes_device *nesdev;
 
-	strict_strtoul(buf, 0, &wqm_quanta_value);
+	wqm_quanta = simple_strtoul(buf, NULL, 0);
 	list_for_each_entry(nesdev, &nes_dev_list, list) {
 		if (i == ee_flsh_adapter) {
-			nesdev->nesadapter->wqm_quanta = wqm_quanta_value;
+			nesdev->nesadapter->wqm_quanta = wqm_quanta;
 			wqm_config1 = nes_read_indexed(nesdev,
 						NES_IDX_WQM_CONFIG1);
 			nes_write_indexed(nesdev, NES_IDX_WQM_CONFIG1,
-					((wqm_quanta_value << 1) |
+					((wqm_quanta << 1) |
 					(wqm_config1 & 0x00000001)));
 			break;
 		}
-- 
1.5.3.3

