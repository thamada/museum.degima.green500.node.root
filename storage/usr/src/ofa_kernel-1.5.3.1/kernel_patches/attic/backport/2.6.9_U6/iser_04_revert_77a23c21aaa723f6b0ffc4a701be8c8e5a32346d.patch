---
 drivers/infiniband/ulp/iser/iscsi_iser.c |   17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)

Index: ofed_kernel/drivers/infiniband/ulp/iser/iscsi_iser.c
===================================================================
--- ofed_kernel.orig/drivers/infiniband/ulp/iser/iscsi_iser.c
+++ ofed_kernel/drivers/infiniband/ulp/iser/iscsi_iser.c
@@ -134,9 +134,18 @@ iscsi_iser_cmd_init(struct iscsi_cmd_tas
 {
 	struct iscsi_iser_conn     *iser_conn  = ctask->conn->dd_data;
 	struct iscsi_iser_cmd_task *iser_ctask = ctask->dd_data;
+	struct scsi_cmnd  *sc = ctask->sc;
 
 	iser_ctask->command_sent = 0;
 	iser_ctask->iser_conn    = iser_conn;
+	if (sc->sc_data_direction == DMA_TO_DEVICE) {
+		BUG_ON(sc->request_bufflen == 0);
+
+		debug_scsi("cmd [itt %x total %d imm %d unsol_data %d\n",
+			   ctask->itt, sc->request_bufflen, ctask->imm_count,
+			   ctask->unsol_count);
+	}
+
 	iser_ctask_rdma_init(iser_ctask);
 	return 0;
 }
@@ -210,14 +219,6 @@ iscsi_iser_ctask_xmit(struct iscsi_conn 
 	struct iscsi_iser_cmd_task *iser_ctask = ctask->dd_data;
 	int error = 0;
 
-	if (ctask->sc->sc_data_direction == DMA_TO_DEVICE) {
-		BUG_ON(ctask->sc->request_bufflen == 0);
-
-		debug_scsi("cmd [itt %x total %d imm %d unsol_data %d\n",
-			   ctask->itt, ctask->sc->request_bufflen,
-			   ctask->imm_count, ctask->unsol_count);
-	}
-
 	debug_scsi("ctask deq [cid %d itt 0x%x]\n",
 		   conn->id, ctask->itt);
 
