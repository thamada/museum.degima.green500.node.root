---
 net/rds/af_rds.c |    3 +--
 net/rds/rds.h    |    4 ++--
 2 files changed, 3 insertions(+), 4 deletions(-)

Index: ofed_kernel/net/rds/af_rds.c
===================================================================
--- ofed_kernel.orig/net/rds/af_rds.c
+++ ofed_kernel/net/rds/af_rds.c
@@ -372,8 +372,7 @@ out:
 #ifdef KERNEL_HAS_PROTO_REGISTER
 static struct proto rds_proto = {
 	.name	  = "RDS",
-	.owner	  = THIS_MODULE,
-	.obj_size = sizeof(struct rds_sock),
+	.slab_obj_size = sizeof(struct rds_sock),
 };
 #endif /* KERNEL_HAS_PROTO_REGISTER */
 
Index: ofed_kernel/net/rds/rds.h
===================================================================
--- ofed_kernel.orig/net/rds/rds.h
+++ ofed_kernel/net/rds/rds.h
@@ -44,8 +44,8 @@
 #endif
 
 #define KERNEL_HAS_PROTO_REGISTER 1
-#define KERNEL_HAS_INET_SK_RETURNING_INET_SOCK 1
-#define KERNEL_HAS_CORE_CALLING_DEV_IOCTL 1
+#undef KERNEL_HAS_INET_SK_RETURNING_INET_SOCK
+#undef KERNEL_HAS_CORE_CALLING_DEV_IOCTL
 
 #ifdef ATOMIC64_INIT
 #define KERNEL_HAS_ATOMIC64
