---
 drivers/infiniband/core/Makefile   |    2 ++
 drivers/infiniband/core/genalloc.c |    1 +
 drivers/infiniband/core/kfifo.c    |    1 +
 drivers/infiniband/core/netevent.c |    1 +
 4 files changed, 5 insertions(+)

Index: ofed_kernel/drivers/infiniband/core/Makefile
===================================================================
--- ofed_kernel.orig/drivers/infiniband/core/Makefile
+++ ofed_kernel/drivers/infiniband/core/Makefile
@@ -30,3 +30,5 @@ ib_umad-y :=			user_mad.o
 ib_ucm-y :=			ucm.o
 
 ib_uverbs-y :=			uverbs_main.o uverbs_cmd.o uverbs_marshall.o
+
+ib_core-y +=			genalloc.o netevent.o kfifo.o
Index: ofed_kernel/drivers/infiniband/core/genalloc.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/infiniband/core/genalloc.c
@@ -0,0 +1 @@
+#include "src/genalloc.c"
Index: ofed_kernel/drivers/infiniband/core/kfifo.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/infiniband/core/kfifo.c
@@ -0,0 +1 @@
+#include "../../../kernel/kfifo.c"
Index: ofed_kernel/drivers/infiniband/core/netevent.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/infiniband/core/netevent.c
@@ -0,0 +1 @@
+#include "src/netevent.c"
