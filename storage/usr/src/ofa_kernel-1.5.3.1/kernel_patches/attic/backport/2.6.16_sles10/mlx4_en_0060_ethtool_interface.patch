From 0096a7c598645ee54f98af40e96c98ff45b190eb Mon Sep 17 00:00:00 2001
From: Yevgeny Petrilin <yevgenyp@mellanox.co.il>
Date: Sun, 31 May 2009 15:20:43 +0300
Subject: [PATCH 6/8] mlx4_en: ethtool interface

Signed-off-by: Yevgeny Petrilin <yevgenyp@mellanox.co.il>
---
 drivers/net/mlx4/en_ethtool.c |    7 ++-----
 1 files changed, 2 insertions(+), 5 deletions(-)

diff --git a/drivers/net/mlx4/en_ethtool.c b/drivers/net/mlx4/en_ethtool.c
index a30ba2c..973416a 100644
--- a/drivers/net/mlx4/en_ethtool.c
+++ b/drivers/net/mlx4/en_ethtool.c
@@ -144,13 +144,10 @@ static void mlx4_en_get_wol(struct net_device *netdev,
 	return;
 }
 
-static int mlx4_en_get_sset_count(struct net_device *dev, int sset)
+static int mlx4_en_get_sset_count(struct net_device *dev)
 {
 	struct mlx4_en_priv *priv = netdev_priv(dev);
 
-	if (sset != ETH_SS_STATS)
-		return -EOPNOTSUPP;
-
 	return NUM_ALL_STATS + (priv->tx_ring_num + priv->rx_ring_num) * 2;
 }
 
@@ -403,7 +400,7 @@ const struct ethtool_ops mlx4_en_ethtool_ops = {
 	.get_tx_csum = ethtool_op_get_tx_csum,
 	.set_tx_csum = ethtool_op_set_tx_ipv6_csum,
 	.get_strings = mlx4_en_get_strings,
-	.get_sset_count = mlx4_en_get_sset_count,
+	.get_stats_count = mlx4_en_get_sset_count,
 	.get_ethtool_stats = mlx4_en_get_ethtool_stats,
 	.get_wol = mlx4_en_get_wol,
 	.get_msglevel = mlx4_en_get_msglevel,
-- 
1.6.1.3

