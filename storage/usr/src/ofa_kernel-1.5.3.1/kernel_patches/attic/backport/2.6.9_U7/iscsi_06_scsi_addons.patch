---
 drivers/scsi/Makefile                 |    5 +++++
 drivers/scsi/attribute_container.c    |    1 +
 drivers/scsi/init.c                   |    1 +
 drivers/scsi/klist.c                  |    1 +
 drivers/scsi/libiscsi_f.c             |    1 +
 drivers/scsi/scsi.c                   |    1 +
 drivers/scsi/scsi_lib.c               |    1 +
 drivers/scsi/scsi_scan.c              |    1 +
 drivers/scsi/scsi_transport_iscsi_f.c |    1 +
 drivers/scsi/transport_class.c        |    1 +
 10 files changed, 14 insertions(+)

Index: ofed_kernel/drivers/scsi/Makefile
===================================================================
--- ofed_kernel.orig/drivers/scsi/Makefile
+++ ofed_kernel/drivers/scsi/Makefile
@@ -2,3 +2,8 @@
 # to build open-iscsi.
 obj-$(CONFIG_SCSI_ISCSI_ATTRS) += scsi_transport_iscsi.o
 obj-$(CONFIG_ISCSI_TCP)        += libiscsi.o   iscsi_tcp.o
+
+CFLAGS_attribute_container.o =   $(BACKPORT_INCLUDES)/src/
+
+scsi_transport_iscsi-y := scsi_transport_iscsi_f.o scsi.o scsi_lib.o init.o klist.o attribute_container.o transport_class.o
+libiscsi-y             := libiscsi_f.o scsi_scan.o
Index: ofed_kernel/drivers/scsi/attribute_container.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/scsi/attribute_container.c
@@ -0,0 +1 @@
+#include "../drivers/base/attribute_container.c"
Index: ofed_kernel/drivers/scsi/init.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/scsi/init.c
@@ -0,0 +1 @@
+#include "src/init.c"
Index: ofed_kernel/drivers/scsi/klist.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/scsi/klist.c
@@ -0,0 +1 @@
+#include "../../lib/klist.c"
Index: ofed_kernel/drivers/scsi/libiscsi_f.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/scsi/libiscsi_f.c
@@ -0,0 +1 @@
+#include "libiscsi.c"
Index: ofed_kernel/drivers/scsi/scsi.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/scsi/scsi.c
@@ -0,0 +1 @@
+#include "src/scsi.c"
Index: ofed_kernel/drivers/scsi/scsi_lib.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/scsi/scsi_lib.c
@@ -0,0 +1 @@
+#include "src/scsi_lib.c"
Index: ofed_kernel/drivers/scsi/scsi_scan.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/scsi/scsi_scan.c
@@ -0,0 +1 @@
+#include "src/scsi_scan.c"
Index: ofed_kernel/drivers/scsi/scsi_transport_iscsi_f.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/scsi/scsi_transport_iscsi_f.c
@@ -0,0 +1 @@
+#include "scsi_transport_iscsi.c"
Index: ofed_kernel/drivers/scsi/transport_class.c
===================================================================
--- /dev/null
+++ ofed_kernel/drivers/scsi/transport_class.c
@@ -0,0 +1 @@
+#include "../drivers/base/transport_class.c"
